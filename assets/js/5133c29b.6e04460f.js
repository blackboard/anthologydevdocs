"use strict";(globalThis.webpackChunkanthology_dev_docs=globalThis.webpackChunkanthology_dev_docs||[]).push([[3325],{28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>i});var t=s(96540);const r={},o=t.createContext(r);function a(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(o.Provider,{value:n},e.children)}},95051:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"blackboard/rest-apis/demo-code/php-demo","title":"Demo using PHP","description":"The rest demo script demonstrates authenticating a REST application,","source":"@site/docs/blackboard/rest-apis/demo-code/php.md","sourceDirName":"blackboard/rest-apis/demo-code","slug":"/blackboard/rest-apis/demo-code/php-demo","permalink":"/docs/blackboard/rest-apis/demo-code/php-demo","draft":false,"unlisted":false,"editUrl":"https://github.com/blackboard/anthologydevdocs/tree/main/docs/blackboard/rest-apis/demo-code/php.md","tags":[],"version":"current","frontMatter":{"title":"Demo using PHP","id":"php-demo","categories":"Learn Rest","published":"","edited":"","author":"Scott Hurrey"},"sidebar":"documentationSidebar","previous":{"title":"Demo using Java","permalink":"/docs/blackboard/rest-apis/demo-code/java-demo"},"next":{"title":"Demo using Python","permalink":"/docs/blackboard/rest-apis/demo-code/python-demo"}}');var r=s(74848),o=s(28453);const a={title:"Demo using PHP",id:"php-demo",categories:"Learn Rest",published:"",edited:"",author:"Scott Hurrey"},i=void 0,c={},d=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Assumptions",id:"assumptions",level:3},{value:"Code Walkthrough",id:"code-walkthrough",level:3},{value:"Authorization and Authentication",id:"authorization-and-authentication",level:3},{value:"Calling Services",id:"calling-services",level:3},{value:"Datasources",id:"datasources",level:3},{value:"Terms",id:"terms",level:3},{value:"Course",id:"course",level:3},{value:"Users",id:"users",level:3},{value:"Memberships",id:"memberships",level:3},{value:"Conclusion",id:"conclusion",level:3}];function p(e){const n={a:"a",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"The rest demo script demonstrates authenticating a REST application,\nmanagement and use of the authorization token, and creating, updating,\ndiscovering, and deleting supported Learn objects."}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"You must [register a developer account and application](/rest-apis/learn/Getting Started/registry) in the Developer Portal"}),"\n",(0,r.jsx)(n.li,{children:"You must\n[register your application](/rest-apis/learn/Getting Started/registry) in Learn"}),"\n",(0,r.jsx)(n.li,{children:"You must also configure the script as outlined in the README for the project"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This PHP command line Application allows you to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Authenticate"}),"\n",(0,r.jsx)(n.li,{children:"Create, Read, and Update a Data Source"}),"\n",(0,r.jsx)(n.li,{children:"Create, Read, and Update a Term"}),"\n",(0,r.jsx)(n.li,{children:"Create, Read, and Update a Course"}),"\n",(0,r.jsx)(n.li,{children:"Create, Read, and Update a User"}),"\n",(0,r.jsx)(n.li,{children:"Create, Read, and Update a Membership"}),"\n",(0,r.jsx)(n.li,{children:"Delete created objects in reverse order of create - membership, user, course, term, datasource."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"All generated output is sent to the terminal."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"This is not meant to be a PHP tutorial. It will not teach you to write code in\nPHP. It will, however, give a Developer familiar with PHP the knowledge\nnecessary to build a Web Services integration."})}),"\n",(0,r.jsx)(n.h3,{id:"assumptions",children:"Assumptions"}),"\n",(0,r.jsx)(n.p,{children:"This help topic assumes the Developer:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"is familiar with PHP"}),"\n",(0,r.jsx)(n.li,{children:"has installed PHP and the HTTP_Request2 PHP Library"}),"\n",(0,r.jsxs)(n.li,{children:["has obtained a copy of the ",(0,r.jsx)(n.a,{href:"https://github.com/blackboard/BBDN-REST-Demo-PHP",children:"source code"})," and built it in conjunction with the project ",(0,r.jsx)(n.a,{href:"https://github.com/blackboard/BBDN-REST-Demo-PHP/blob/master/README.md",children:"README.md"})," file."]}),"\n",(0,r.jsx)(n.li,{children:"has a REST-enabled Learn instance."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"code-walkthrough",children:"Code Walkthrough"}),"\n",(0,r.jsx)(n.p,{children:"To build an integration with the Learn REST Web Services, regardless of\nthe programming language of choice, can really be summed up in two steps:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Use the Application Key and Secret to obtain an OAuth 2.0 access token, as described in the [Basic Authentication](/rest-apis/learn/Getting Started/basic-authentication) document."}),"\n",(0,r.jsx)(n.li,{children:"Call the appropriate REST endpoint with the appropriate data to perform the appropriate action."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"authorization-and-authentication",children:"Authorization and Authentication"}),"\n",(0,r.jsxs)(n.p,{children:["The REST Services rely on OAuth 2.0 Bearer Tokens for authentication. A\nrequest is made to the token endpoint with a Basic Authorization header\ncontaining the base64-encoded key",":secret"," string as its key. The token service\nreturns a JSON object containing the Access Token, the Token Type, and the\nnumber of seconds until the token expires. The token is set to expire after\none hour, and subsequent calls to retrieve the token will return the same\ntoken with an updated expiry time until such time that the token has expired.\nThere is no refresh token and currently no revoke token method."]}),"\n",(0,r.jsxs)(n.p,{children:["The PHP code handles this in ",(0,r.jsx)(n.code,{children:"classes/Rest.class.php"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function authorize() {\n    \xa0\xa0\xa0\xa0\xa0\xa0 $constants = new Constants();\n    \xa0\xa0\xa0\xa0\xa0\xa0 $token = new Token();\n    \xa0\xa0\xa0\xa0\xa0\xa0 $request = new HTTP_Request2($constants->HOSTNAME . $constants->AUTH_PATH, HTTP_Request2::METHOD_POST);\n    \xa0\xa0\xa0\xa0\xa0\xa0 $request->setAuth($constants->KEY, $constants->SECRET, HTTP_Request2::AUTH_BASIC);\n    \xa0\xa0\xa0\xa0\xa0\xa0 $request->setBody('grant_type=client_credentials');\n    \xa0\xa0\xa0\xa0\xa0\xa0 $request->setHeader('Content-Type', 'application/x-www-form-urlencoded');\n    \xa0\xa0\xa0\xa0\xa0\xa0 try {\n    \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 $response = $request->send();\n    \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 if (200 == $response->getStatus()) {\n    \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 print \" Authorize Application...\\n\";\n    \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 $token = json_decode($response->getBody());\n    \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 } else {\n    \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\n    \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 $response->getReasonPhrase();\n    \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 $BbRestException = json_decode($response->getBody());\n    \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 var_dump($BbRestException);\xa0\xa0\xa0\xa0\n    \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 }\n    \xa0\xa0\xa0\xa0\xa0\xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 print 'Error: ' . $e->getMessage();\n    \xa0\xa0\xa0\xa0\xa0\xa0 }\n    \xa0\xa0\xa0\xa0\xa0\xa0 return $token;\n    \xa0 }\n"})}),"\n",(0,r.jsx)(n.p,{children:"The JSON response is serialized into the Token object, and you may then\nretrieve those values from that object."}),"\n",(0,r.jsx)(n.h3,{id:"calling-services",children:"Calling Services"}),"\n",(0,r.jsx)(n.p,{children:"The individual service calls are handled by the classes/Rest.class.php file.\nEach operation and object combination has its own method. Each of these\nmethods creates the JSON body by instantiating the appropriate model from the\nclasses directory when necessary, and then generates the appropriate HTTP\nRequest, ships it to Learn, and serializes the JSON response back into the\nappropriate model."}),"\n",(0,r.jsxs)(n.p,{children:["End points are generally defined as ",(0,r.jsx)(n.code,{children:"/learn/api/public/v1/<objecttype>/<objectId>"}),". Object ID can be either the pk1, like ",(0,r.jsx)(n.code,{children:"_1_1"}),", or as the batchuid. This value should be prepended by externalId:, like ",(0,r.jsx)(n.code,{children:"externalId:test101"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["For example, to retrieve a course by the pk1 ",(0,r.jsx)(n.code,{children:"_1_1"}),", you would call ",(0,r.jsx)(n.strong,{children:"GET\n/learn/api/public/v1/courses/_1_1"}),". To retrieve by the batchuid ",(0,r.jsx)(n.code,{children:"test101"}),", you\nwould call ",(0,r.jsxs)(n.strong,{children:["GET /learn/api/public/v1/courses/externalId",":test101","."]})]}),"\n",(0,r.jsx)(n.p,{children:"Create is sent to Learn as a HTTP POST message with a JSON body that defines\nthe object. The endpoint should omit the objectId, as this will be generated\non creation."}),"\n",(0,r.jsx)(n.p,{children:"Read is sent to Learn as a HTTP GET message with an empty body. The endpoint\nshould include the objectId being retrieved."}),"\n",(0,r.jsx)(n.p,{children:"Update is sent to Learn as a HTTP PATCH message with a JSON body that defines\nthe object. The endpoint should include the objectId being updated."}),"\n",(0,r.jsx)(n.p,{children:"Delete is sent to Learn as a HTTP DELETE message with empty body. The endpoint\nshould include the objectId being deleted."}),"\n",(0,r.jsx)(n.h3,{id:"datasources",children:"Datasources"}),"\n",(0,r.jsxs)(n.p,{children:["Datasources are handled in ",(0,r.jsx)(n.code,{children:"classes/Rest.class.php"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function createDatasource($access_token) {\n    \xa0 $constants = new Constants();\n    \xa0 $datasource = new Datasource();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->DSK_PATH, HTTP_Request2::METHOD_POST);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0 $request->setBody(json_encode($datasource));\n    \xa0\n      try {\n    \xa0     $response = $request->send();\n    \xa0\n          if (201 == $response->getStatus()) {\n    \xa0         print \"\\n Create Datasource...\\n\";\n    \xa0         $datasource = json_decode($response->getBody());\n    \xa0     } else {\n    \xa0         print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' . $response->getReasonPhrase();\n    \xa0         $BbRestException = json_decode($response->getBody());\n    \xa0         var_dump($BbRestException);\n    \xa0     }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0     print 'Error: ' . $e->getMessage();\n    \xa0 }\n    \xa0\n      return $datasource;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Read"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function readDatasource($access_token, $dsk_id) {\n    \xa0 $constants = new Constants();\n    \xa0 $datasource = new Datasource();\n\n    \xa0 $request = new HTTP_Request2($constants->HOSTNAME . $constants->DSK_PATH . '/' . $dsk_id, HTTP_Request2::METHOD_GET);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (200 == $response->getStatus()) {\n    \xa0     print \"\\n Read Datasource...\\n\";\n    \xa0     $datasource = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException)\n        }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n    \xa0\n      return $datasource;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Update"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function updateDatasource($access_token, $dsk_id) {\n    \xa0 $constants = new Constants();\n    \xa0 $datasource = new Datasource();\n    \xa0\n      $datasource->id = $dsk_id;\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->DSK_PATH . '/' . $dsk_id, 'PATCH');\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0 $request->setBody(json_encode($datasource));\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (200 == $response->getStatus()) {\n    \xa0     print \"\\n Update Datasource...\\n\";\n    \xa0     $datasource = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' . $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n    \xa0\n      return $datasource;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Delete"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function deleteDatasource($access_token, $dsk_id) {\n    \xa0 $constants = new Constants();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->DSK_PATH . '/' . $dsk_id, HTTP_Request2::METHOD_DELETE);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (204 == $response->getStatus()) {\n    \xa0     print \"Datasource Deleted\";\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' . $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0     return FALSE;\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0   return FALSE;\n    \xa0 }\n    \xa0\n      return TRUE;\n    }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"terms",children:"Terms"}),"\n",(0,r.jsxs)(n.p,{children:["Terms are handled in ",(0,r.jsx)(n.code,{children:"classes/Rest.class.php"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function createTerm($access_token, $dsk_id) {\n    \xa0 $constants = new Constants();\n    \xa0 $term = new Term();\n    \xa0\n      $term->dataSourceId = $dsk_id;\n    \xa0 $term->availability = new Availability();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->TERM_PATH, HTTP_Request2::METHOD_POST);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0 $request->setBody(json_encode($term));\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (201 == $response->getStatus()) {\n    \xa0     print \"\\n Create Term...\\n\";\n    \xa0     $term = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n\n    \xa0 return $term;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Read"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function readTerm($access_token, $term_id) {\n    \xa0 $constants = new Constants();\n    \xa0 $term = new Term();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->TERM_PATH . '/' . $term_id, HTTP_Request2::METHOD_GET);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (200 == $response->getStatus()) {\n    \xa0     print \"\\n Read Term...\\n\";\n    \xa0     $datasource = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n    \xa0\n      return $term;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Update"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function updateTerm($access_token, $dsk_id, $term_id) {\n    \xa0 $constants = new Constants();\n    \xa0 $term = new Term();\n    \xa0\n      $term->id = $term_id;\n    \xa0 $term->dataSourceId = $dsk_id;\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->TERM_PATH . '/' . $term_id, 'PATCH');\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0 $request->setBody(json_encode($term));\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (200 == $response->getStatus()) {\n    \xa0     print \"\\n Update Term...\\n\";\n    \xa0     $datasource = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n    \xa0\n      return $term;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Delete"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function deleteTerm($access_token, $term_id) {\n    \xa0 $constants = new Constants();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->TERM_PATH . '/' . $term_id, HTTP_Request2::METHOD_DELETE);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (204 == $response->getStatus()) {\n    \xa0     print \"Term Deleted\";\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0     return FALSE;\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0   return FALSE;\n    \xa0 }\n    \xa0\n      return TRUE;\n    }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"course",children:"Course"}),"\n",(0,r.jsxs)(n.p,{children:["Courses are handled in ",(0,r.jsx)(n.code,{children:"classes/Rest.class.php"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function createCourse($access_token, $dsk_id, $term_id) {\n    \xa0 $constants = new Constants();\n    \xa0 $course = new Course();\n    \xa0\n      $course->dataSourceId = $dsk_id;\n    \xa0 $course->termId = $term_id;\n    \xa0 $course->availability = new Availability();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->COURSE_PATH, HTTP_Request2::METHOD_POST);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0 $request->setBody(json_encode($course));\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (201 == $response->getStatus()) {\n    \xa0     print \"\\n Create Course...\\n\";\n    \xa0     $course = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n\n    \xa0 return $course;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Read"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function readCourse($access_token, $course_id) {\n    \xa0 $constants = new Constants();\n    \xa0 $course = new Course();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->COURSE_PATH . '/' . $course_id, HTTP_Request2::METHOD_GET);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (200 == $response->getStatus()) {\n    \xa0     print \"\\n Read Course...\\n\";\n    \xa0     $course = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n\n    \xa0 return $course;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Update"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function updateCourse($access_token, $dsk_id, $course_id, $course_uuid, $course_created) {\n    \xa0 $constants = new Constants();\n    \xa0 $course = new Course();\n    \xa0\n      $course->id = $course_id;\n    \xa0 $course->uuid = $course_uuid;\n    \xa0 $course->created = $course_created;\n    \xa0 $course->dataSourceId = $dsk_id;\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->COURSE_PATH . '/' . $course_id, 'PATCH');\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0 $request->setBody(json_encode($course));\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (200 == $response->getStatus()) {\n    \xa0     print \"\\n Update Course...\\n\";\n    \xa0     $course = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n\n    \xa0 return $course;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Delete"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function deleteCourse($access_token, $course_id) {\n    \xa0 $constants = new Constants();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->COURSE_PATH . '/' . $course_id, HTTP_Request2::METHOD_DELETE);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (204 == $response->getStatus()) {\n    \xa0     print \"Course Deleted\";\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0     return FALSE;\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0   return FALSE;\n    \xa0 }\n\n    \xa0 return TRUE;\n    }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"users",children:"Users"}),"\n",(0,r.jsxs)(n.p,{children:["Users are handled in ",(0,r.jsx)(n.code,{children:"classes/Rest.class.php"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function createUser($access_token, $dsk_id) {\n    \xa0 $constants = new Constants();\n    \xa0 $user = new User();\n    \xa0\n      $user->dataSourceId = $dsk_id;\n    \xa0 $user->availability = new Availability();\n    \xa0 $user->name = new Name();\n    \xa0 $user->contact = new Contact();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->USER_PATH, HTTP_Request2::METHOD_POST);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0 $request->setBody(json_encode($user));\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (201 == $response->getStatus()) {\n    \xa0     print \"\\n Create User...\\n\";\n    \xa0     $user = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n\n    \xa0 return $user;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Read"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function readUser($access_token, $user_id) {\n    \xa0 $constants = new Constants();\n    \xa0 $user = new User();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->USER_PATH . '/' . $user_id, HTTP_Request2::METHOD_GET);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (200 == $response->getStatus()) {\n    \xa0     print \"\\n Read User...\\n\";\n    \xa0     $user = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n\n    \xa0 return $user;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Update"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function updateUser($access_token, $dsk_id, $user_id, $user_uuid, $user_created) {\n    \xa0 $constants = new Constants();\n    \xa0 $user = new User();\n    \xa0\n      $user->id = $user_id;\n    \xa0 $user->uuid = $user_uuid;\n    \xa0 $user->created = $user_created;\n    \xa0 $user->dataSourceId = $dsk_id;\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->USER_PATH . '/' . $user_id, 'PATCH');\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0 $request->setBody(json_encode($user));\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (200 == $response->getStatus()) {\n    \xa0     print \"\\n Update User...\\n\";\n    \xa0     $user = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n\n    \xa0 return $user;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Delete"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function deleteUser($access_token, $user_id) {\n    \xa0 $constants = new Constants();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->USER_PATH . '/' . $user_id, HTTP_Request2::METHOD_DELETE);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (204 == $response->getStatus()) {\n    \xa0     print \"User Deleted\";\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0     return FALSE;\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0   return FALSE;\n    \xa0 }\n\n    \xa0 return TRUE;\n    }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"memberships",children:"Memberships"}),"\n",(0,r.jsxs)(n.p,{children:["Memberships are handled in ",(0,r.jsx)(n.code,{children:"classes/Rest.class.php"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function createMembership($access_token, $dsk_id, $course_id, $user_id) {\n    \xa0 $constants = new Constants();\n    \xa0 $membership = new Membership();\n    \xa0\n      $membership->dataSourceId = $dsk_id;\n    \xa0 $membership->availability = new Availability();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->COURSE_PATH . '/' . $course_id . '/users/' . $user_id, HTTP_Request2::METHOD_PUT);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0 $request->setBody(json_encode($membership));\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (201 == $response->getStatus()) {\n    \xa0     print \"\\n Create Membership...\\n\";\n    \xa0     $membership = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n\n    \xa0 return $membership;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Read"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function readMembership($access_token, $course_id, $user_id) {\n    \xa0 $constants = new Constants();\n    \xa0 $membership = new Membership();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->COURSE_PATH . '/' . $course_id . '/users/' . $user_id,\xa0 HTTP_Request2::METHOD_GET);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (200 == $response->getStatus()) {\n    \xa0     print \"\\n Read Membership...\\n\";\n    \xa0     $membership = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n\n    \xa0 return $membership;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Update"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function updateMembership($access_token, $dsk_id, $course_id, $user_id, $membership_created) {\n    \xa0 $constants = new Constants();\n    \xa0 $membership = new Membership();\n    \xa0\n      $membership->dataSourceId = $dsk_id;\n    \xa0 $membership->userId = $user_id;\n    \xa0 $membership->courseId = $course_id;\n    \xa0 $membership->created = $membership_created;\n    \xa0 $membership->availability = new Availability();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->COURSE_PATH . '/' . $course_id . '/users/' . $user_id, 'PATCH');\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0 $request->setBody(json_encode($membership));\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (200 == $response->getStatus()) {\n    \xa0     print \"\\n Update Membership...\\n\";\n    \xa0     $membership = json_decode($response->getBody());\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0 }\n\n    \xa0 return $membership;\n    }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Delete"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"    public function deleteMembership($access_token, $course_id, $user_id) {\n    \xa0 $constants = new Constants();\n    \xa0\n      $request = new HTTP_Request2($constants->HOSTNAME . $constants->COURSE_PATH . '/' . $course_id . '/users/' . $user_id, HTTP_Request2::METHOD_DELETE);\n    \xa0 $request->setHeader('Authorization', 'Bearer ' . $access_token);\n    \xa0 $request->setHeader('Content-Type', 'application/json');\n    \xa0\n      try {\n    \xa0   $response = $request->send();\n    \xa0\n        if (204 == $response->getStatus()) {\n    \xa0     print \"Membership Deleted\";\n    \xa0   } else {\n    \xa0     print 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .\xa0 $response->getReasonPhrase();\n    \xa0     $BbRestException = json_decode($response->getBody());\n    \xa0     var_dump($BbRestException);\n    \xa0     return FALSE;\n    \xa0   }\n    \xa0 } catch (HTTP_Request2_Exception $e) {\n    \xa0   print 'Error: ' . $e->getMessage();\n    \xa0   return FALSE;\n    \xa0 }\n\n    \xa0 return TRUE;\n    }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsxs)(n.p,{children:["All of the code snippets included in this document at included in a sample\nREST Demo PHP application available on\n",(0,r.jsx)(n.a,{href:"https://github.com/blackboard/BBDN-REST-Demo-PHP",children:"GitHub"}),".\nThere is a README.html included that talks more specifically about building and\nrunning the code. Feel free to review the code and run it against a test or\ndevelopment Learn instance to see how it works."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}}}]);