"use strict";(globalThis.webpackChunkanthology_dev_docs=globalThis.webpackChunkanthology_dev_docs||[]).push([[6083],{84361:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"blackboard/uef/Tutorials/tutorials-course-leftnav","title":"LTI Launch From Ultra Course Leftnav","description":"Overview","source":"@site/docs/blackboard/uef/Tutorials/05-tutorials-course-leftnav.md","sourceDirName":"blackboard/uef/Tutorials","slug":"/blackboard/uef/Tutorials/tutorials-course-leftnav","permalink":"/docs/blackboard/uef/Tutorials/tutorials-course-leftnav","draft":false,"unlisted":false,"editUrl":"https://github.com/blackboard/anthologydevdocs/tree/main/docs/blackboard/uef/Tutorials/05-tutorials-course-leftnav.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"LTI Launch From Ultra Course Leftnav","author":"Mark Kauffman","id":"tutorials-course-leftnav","published":"2023-10-10"},"sidebar":"documentationSidebar","previous":{"title":"LTI Launch context added in new Window Launches","permalink":"/docs/blackboard/uef/Tutorials/lti-launch"},"next":{"title":"Ultra Proctoring Service Integration - IMS Proctoring Spec + UEF","permalink":"/docs/blackboard/proctoring/proctoring-service-integration"}}');var o=t(74848),s=t(28453),l=t(13554),r=t.n(l);const i={title:"LTI Launch From Ultra Course Leftnav",author:"Mark Kauffman",id:"tutorials-course-leftnav",published:"2023-10-10"},c=void 0,d={},h=[{value:"Overview",id:"overview",level:3},{value:"Prerequisites",id:"prerequisites",level:3},{value:"How To Ultra Extension Framework - Create A Link to Launch An LTI Managed Placement",id:"how-to-ultra-extension-framework---create-a-link-to-launch-an-lti-managed-placement",level:3},{value:"Sample Code",id:"sample-code",level:3},{value:"Explanation of the Video and Associated Code",id:"explanation-of-the-video-and-associated-code",level:3}];function u(e){const n={a:"a",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h3,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"We've had a lot of requests asking about how to add an LTI launch to an Ultra course's left navigation (Details & Actions). If you have that question, this page is for you."}),"\n",(0,o.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"The Group your application is in must be UEF enabled. If it's not, file a Behind the Blackboard Support ticket. Provide the developer email address and the Group your UEF application will be in, NOT the application ID. The application ID is useless information for this. If you are a vendor, you must have a Partnership level that is Bronze or higher."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Complete the ",(0,o.jsx)(n.a,{href:"/docs/blackboard/uef/Tutorials/tutorial-lti",children:"Ultra Extension Framework"})," tutorial."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"You know the handle of the managed placement for your LTI tool that you want, then click on the link in the left nav to launch. You can find this by going to the Learn admin page, opening the LTI tools, looking at your tool's managed placements, click edit on the one you want, and copy the handle. Furthermore, you'll see where this is used in the code in number six of the explanation below."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"how-to-ultra-extension-framework---create-a-link-to-launch-an-lti-managed-placement",children:"How To Ultra Extension Framework - Create A Link to Launch An LTI Managed Placement"}),"\n",(0,o.jsx)(n.p,{children:"This video demonstrates creating a link in the Ultra course Details & Actions section that does an LTI launch."}),"\n",(0,o.jsx)(r(),{playback:!1,controls:!0,url:"https://www.youtube.com/watch?v=1SNQXsaPLKg&ab_channel=AnthologyDevelopers"}),"\n",(0,o.jsx)(n.h3,{id:"sample-code",children:"Sample Code"}),"\n",(0,o.jsxs)(n.p,{children:["You may find the related code used on the video here: ",(0,o.jsx)(n.a,{href:"https://github.com/blackboard/BBDN-UEF-Python/tree/102-UEF-COURSE-LEFTNAV",children:"GitHub BBDN-UEF-Python"})]}),"\n",(0,o.jsx)(n.h3,{id:"explanation-of-the-video-and-associated-code",children:"Explanation of the Video and Associated Code"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"We clear the browser cache often when making changes to the integration file. Your browser will cache it, so when you make changes if you don't clear the browser cache you won't see your work."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Registration for a course detail message. In our onAuthorizedWithUltra function, we add the following:"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'messageChannel.postMessage({\n  type: "course:detail:register",\n  registrationName: "UEF course:detail Test",\n});\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"Add our link to the course details section. Do this as follows."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"if (message.data.eventType === 'portal:new' && message.data.selector === 'course.outline.details') {\n\tshowCourseDetails(message.data.portalId, 'UEF cod Test', 'Click Here');\n}\n\nfunction showCourseDetails (portalId, titleName, linkName) {\n\tmessageChannel.postMessage({\n    \ttype: 'portal:render',\n    \tportalId: portalId,\n    \tcontents: {\n        \ttag: 'div',\n        \tprops: {\n            \tclassName: 'uef--course-details--container',\n        \t},\n        \tchildren: [\n            \t{\n                \ttag: 'button',\n                \tprops: {\n                    \tclassName: 'uef--button--course-details',\n                    \tonClick: {\n                        \tcallbackId: 'course-details-test',\n                        \tmode: 'sync',\n                    \t}\n                \t},\n\n... for brevity. Read the rest of the code. Of interest here is the callbackId: 'course-details-test'\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsx)(n.li,{children:"In our onMessageFromUltra function we add code to watch for the user clicking the link, the callback. It will call the openPanelCD function to open the panel that causes the LTI launch and displays its contents."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'// Our link was clicked. We get a callback and tell Ultra to open our course details panel\nif (message.data.type === "portal:callback") {\n  switch (message.data.callbackId) {\n    case "course-details-test":\n      openPanelCD("full", localStorage.getItem("context"));\n      break;\n  }\n}\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"5",children:["\n",(0,o.jsx)(n.li,{children:"Our openPanelCD fuction posts a message to Ultra to open a new panel. We'll have this panel opening make the LTI launch and display the response."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'// COURSE-LEFTNAV tell Ultra to open our panel. It will send us a message back after\n// it does. Then we render some content there in panel-3\nfunction openPanelCD(panelSize, data) {\n  localStorage.setItem("context", data);\n  localStorage.setItem("action", "SHOW_PANEL");\n\n  messageChannel.postMessage({\n    type: "portal:panel",\n    correlationId: "panel-3",\n    panelType: panelSize,\n    panelTitle: "UEF Courses Details Demo",\n    attributes: {\n      onClose: {\n        callbackId: "panel-3-close",\n      },\n    },\n  });\n}\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"6",children:["\n",(0,o.jsx)(n.li,{children:"We add code to our renderPanelContents function. renderPanelContents gets called when Ultra responds to any of our requests to open a new panel. Remember that the handle in the code will be unique to your tool's managed placement."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"function renderPanelContents(message) {\n\t... for brevity\n\t// You MUST change the handle: value to match that of your LTI managed placment handle.\n\t// In summary the panel got opened so we put the contents of an LTI launch within.\n\tif (message.data.correlationId === 'panel-3') {\n\n    \tpanelId = message.data.portalId;\n\n    \tconst contentsToSendLti = {\n        \ttag: 'LtiLaunch',\n        \tprops: {\n          \thandle: 'ce9718549a1d4151b62e9fdfeff15dff',\n          \tcustomParameters: JSON.stringify({\n            \t'keya': 'foo',\n            \t'keyb': 'bar',\n            \t'keyc': 'baz'\n          \t}),\n          \tstyle: {\n            \twidth: '75%',\n            \theight: '75%',\n          \t},\n        \t}\n    \t}\n\n    \tmessageChannel.postMessage({\n        \ttype: 'portal:render',\n        \tportalId: message.data.portalId,\n        \tcontents: contentsToSendLti\n    \t});\n\n\t}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}}}]);