"use strict";(self.webpackChunkanthology_dev_docs=self.webpackChunkanthology_dev_docs||[]).push([[5305],{15680:(e,t,n)=>{n.d(t,{xA:()=>u,yg:()=>m});var a=n(96540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=a.createContext({}),c=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(d.Provider,{value:t},e.children)},l="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,s=e.originalType,d=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),l=c(n),h=o,m=l["".concat(d,".").concat(h)]||l[h]||p[h]||s;return n?a.createElement(m,i(i({ref:t},u),{},{components:n})):a.createElement(m,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=n.length,i=new Array(s);i[0]=h;var r={};for(var d in t)hasOwnProperty.call(t,d)&&(r[d]=t[d]);r.originalType=e,r[l]="string"==typeof e?e:o,i[1]=r;for(var c=2;c<s;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},81357:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>y,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var a=n(58168),o=(n(96540),n(15680));const s={title:"Post Unscheduled Payments",id:"studentapi-postunscheduledpayment-details",sidebar_position:1,author:"Jim Burns",published:"",edited:""},i=void 0,r={unversionedId:"student/best-practices/studentapi-postunscheduledpayment-details",id:"student/best-practices/studentapi-postunscheduledpayment-details",title:"Post Unscheduled Payments",description:'In order to comply with some of the 90/10 reporting requirements, it may be necessary to ensure that all payments posted to a student\'s ledger card are explicitly associated to a fund source.  The main API endpoint used for posting payments provides the option in the request to associate the payment being posted to an expected payment for a packaged student award or post the payment and not associate it to a packaged award.  When using the latter option, the payment will be posted to the ledger card and will not be associated to a fund source.  This can potentially cause some challenges with providing complete and accurate data for the 90/10 reporting requirements.   The API endpoint for posting "unscheduled" payments can be used to address this issue.   The scope of this document will cover the details on how to utilize this API for posting unscheduled payments which ensure that each payment being posted is explicitly associated to a fund source.',source:"@site/docs/student/best-practices/PostUnscheduledPayments.md",sourceDirName:"student/best-practices",slug:"/student/best-practices/studentapi-postunscheduledpayment-details",permalink:"/docs/student/best-practices/studentapi-postunscheduledpayment-details",draft:!1,editUrl:"https://github.com/OneComputerGuy/anthologydevdocs/tree/main/docs/student/best-practices/PostUnscheduledPayments.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Post Unscheduled Payments",id:"studentapi-postunscheduledpayment-details",sidebar_position:1,author:"Jim Burns",published:"",edited:""},sidebar:"documentationSidebar",previous:{title:"Payment Partner Overview",permalink:"/docs/student/best-practices/studentapi-paymentpartner-overview"},next:{title:"Using the SaveStudentTransferCredit command API",permalink:"/docs/student/best-practices/studentapi-savestudenttransfercredit-details"}},d={},c=[{value:"Unscheduled Payments API",id:"unscheduled-payments-api",level:2},{value:"Swagger documentation",id:"swagger-documentation",level:3},{value:"API request details",id:"api-request-details",level:3},{value:"Authorization",id:"authorization",level:2},{value:"Conclusion",id:"conclusion",level:2}],u=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.yg)("div",t)},l=u("VersioningTracker"),p=u("AuthorBox"),h={toc:c},m="wrapper";function y(e){let{components:t,...i}=e;return(0,o.yg)(m,(0,a.A)({},h,i,{components:t,mdxType:"MDXLayout"}),(0,o.yg)(l,{frontMatter:s,mdxType:"VersioningTracker"}),(0,o.yg)("p",null,'In order to comply with some of the 90/10 reporting requirements, it may be necessary to ensure that all payments posted to a student\'s ledger card are explicitly associated to a fund source.  The main API endpoint used for posting payments provides the option in the request to associate the payment being posted to an expected payment for a packaged student award or post the payment and not associate it to a packaged award.  When using the latter option, the payment will be posted to the ledger card and will not be associated to a fund source.  This can potentially cause some challenges with providing complete and accurate data for the 90/10 reporting requirements.   The API endpoint for posting "unscheduled" payments can be used to address this issue.   The scope of this document will cover the details on how to utilize this API for posting unscheduled payments which ensure that each payment being posted is explicitly associated to a fund source.'),(0,o.yg)("h2",{id:"unscheduled-payments-api"},"Unscheduled Payments API"),(0,o.yg)("p",null,"The endpoint to use for posting unscheduled payments is api/commands/StudentAccounts/StudentAccountTransaction/PostAccountTransactionPayment.  Posting an unscheduled payment means that the payment being posted is NOT associated to an expected disbursement record (ScheduledDisbursements entity). Instead, the fund source that the payment is associated to will be specified in the API request.  The packaged award data will be created/updated within the unit of work for posting the payment.  Once the payment is saved, it will be associated to the Student Award data created and thus be explicitly associated to a fund source."),(0,o.yg)("h3",{id:"swagger-documentation"},"Swagger documentation"),(0,o.yg)("p",null,"To access the Swagger documentation, append 'swagger' to the end of the base URI that is used to launch the Anthology Student web client application.  Once the Swagger landing page is loaded, use the Domain and Functional Area drop down filters at the top of the swagger page to access the documentation.  To access this API endpoint, select 'Student Accounts' for Domain and 'Ledger Card' for Functional Area and then select Refresh.  Find the StudentAccountTransaction entity in the displayed list of entities and then click the lightning bolt icon.  The list of APIs for this entity be listed including the PostAccountTransactionPayment operation.   "),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"PostUnscheduledPayments",src:n(37941).A,width:"1668",height:"844"})),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"PostUnscheduledPayments",src:n(52190).A,width:"1850",height:"843"})),(0,o.yg)("p",null,"This PostAccountTransactionPayment operation allows for posting a scheduled payment, adhoc payment and an unscheduled payment.  The details for how to populate the request will be provided for posting an unscheduled payment.  If the need is to post a scheduled payment or an adhoc payment, then it is recommended to use a different API endpoint.  That endpoint is api/student-accounting/ledger-payment-transactions.  Details for how to use this API can be found in the Payment Partner Overview article."),(0,o.yg)("p",null,(0,o.yg)("a",{parentName:"p",href:"https://docs.anthology.com/docs/student/best-practices/studentapi-paymentpartner-overview"},"Payment Partner Overview")),(0,o.yg)("h3",{id:"api-request-details"},"API request details"),(0,o.yg)("p",null,"Pertinent details for some of the properties in the request for posting an unscheduled payment are below.  Additionally, an example payload is provided at the end of this section."),(0,o.yg)("p",null,"The base required fields in the request are AcademicYearSequence, AwardYear, BankAccountId, Description, FundSourceId, PaymentMode, PaymentType, StudentAcademicYearId, StudentEnrollmentPeriodId, StudentId, TransactionAmount and TransactionDate.  Additionally, if Cashiering is turned on for the Campus that is associated to the student enrollment period record the payment is being posted for, then the CashDrawerId, CashDrawerSessionId and CashierUserId are also required.  "),(0,o.yg)("p",null,"AcademicYearSequence - this should be populated with the Sequence property value on the StudentAcademicYear row associated to the StudentAcademicYearId specified in the request (see below)"),(0,o.yg)("p",null,"AwardYear - populate with the award year for the StudentAward record that will be created (if one does not already exist).  Format is ####-## i.e. 2023-24, 2024-25"),(0,o.yg)("p",null,"BankAccountId - Id of the Bank Account the payment will be associated to.  NOTE:  The row referenced in the BankAccount entity with this Id must be associated to a row in the Bank entity where CampusId equals the campus id on the Student Enrollment period record the payment is being posted for."),(0,o.yg)("p",null,"Description - description of the payment transaction"),(0,o.yg)("p",null,"FundSourceId - Id of the Fund Source for this payment.  A new StudentAward record will be created if a row does not already exist for the StudentEnrollmentPeriodId, FundSourceId and AwardYear provided in the request."),(0,o.yg)("p",null,"PaymentMode - This must be set to 2 for posting an unscheduled payment.  "),(0,o.yg)("p",null,"PaymentType - This is an Enum property.  Valid values: C=Cash, E=EFT, H=Check, I=ACH, R=Credit Card, O=Other"),(0,o.yg)("p",null,"StudentAcademicYearId - Id of the Student academic year record that the payment will be associated to.  If a new StudentAward record will be created, it will be associated to the student academic year specified here"),(0,o.yg)("p",null,"StudentEnrollmentPeriodId - Id of the Student enrollment period record the payment is being posted for"),(0,o.yg)("p",null,"StudentId - Id of the student record the payment is being posted for"),(0,o.yg)("p",null,"TransactionAmount - amount of the payment"),(0,o.yg)("p",null,'TransactionDate - transaction date for payment.  Specify "00:00:00" for the time portion of this value'),(0,o.yg)("p",null,"IsNewPaymentSuccessful - This should be set to 1.  This will cause unnecessary execution logic to be bypassed and avoid unexpected behavior to occur.  "),(0,o.yg)("p",null,'IgnoreTermRequired - The TermId property in the request is conditionally required dependent on configuration.  There is a setting located in Settings - Student Accounts - General called "Require Term Codes".  If this is set to Yes, then a term is required to be associated for transactions that are posted to the ledger card.  Setting this property to 1 will override this setting and allow the payment to be posted without being associated to a term.  Whether this is appropriate to use or not for overriding this will depend on the client\'s requirements that you are implementing this API for.'),(0,o.yg)("p",null,"CashDrawerSessionId - Id of the Cash Drawer Session the payment will be associated to.  The Cash Drawer session must be in an open state meaning the IsReconciled property on the cash drawer session record must be equal to 0."),(0,o.yg)("p",null,"CashDrawerId - Id of the Cash Drawer associated to the Cash Drawer Session record referenced above."),(0,o.yg)("p",null,"CashierUserId - Id of the user posting the payment. Typically, this would be the Id of the authenticated staff user executing this API.  This user needs to be configured as a cashier in the application."),(0,o.yg)("p",null,"Below is a sample payload used to successfully execute this API."),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"PostUnscheduledPayments",src:n(4679).A,width:"1383",height:"716"})),(0,o.yg)("h2",{id:"authorization"},"Authorization"),(0,o.yg)("p",null,"In order to execute this API, the authenticated user must be authorized to the Student Accounts - Student Account Transaction - New task which is done in the Security Console application."),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"PostUnscheduledPayments",src:n(25064).A,width:"1482",height:"906"})),(0,o.yg)("h2",{id:"conclusion"},"Conclusion"),(0,o.yg)("p",null,"As can be the case, there may be additional nuances for how to properly leverage this API to address a client's specific use cases that are not covered within this document.  "),(0,o.yg)("p",null,"If there are questions after reviewing this document and the corresponding swagger documentation, you can submit them by sending an email to ",(0,o.yg)("a",{parentName:"p",href:"mailto:developers@anthology.com"},"developers@anthology.com"),"."),(0,o.yg)(p,{frontMatter:s,mdxType:"AuthorBox"}))}y.isMDXComponent=!0},37941:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/PostUnscheduledPayments1-450b22112ea1e12b181e81b3f02490f7.png"},52190:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/PostUnscheduledPayments2-fd50102f90e72a9ddb3adc0aa095d132.png"},4679:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/PostUnscheduledPayments3-5903e6a55698d0279f80090961d5ca72.png"},25064:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/PostUnscheduledPayments4-9a79875027dbb9a9c0d50cbca162ee2d.png"}}]);