"use strict";(self.webpackChunkanthology_dev_docs=self.webpackChunkanthology_dev_docs||[]).push([[9753],{15680:(t,e,n)=>{n.d(e,{xA:()=>d,yg:()=>m});var a=n(96540);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e){if(null==t)return{};var n,a,o=function(t,e){if(null==t)return{};var n,a,o={},s=Object.keys(t);for(a=0;a<s.length;a++)n=s[a],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var u=a.createContext({}),c=function(t){var e=a.useContext(u),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},d=function(t){var e=c(t.components);return a.createElement(u.Provider,{value:e},t.children)},l="mdxType",h={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},p=a.forwardRef((function(t,e){var n=t.components,o=t.mdxType,s=t.originalType,u=t.parentName,d=r(t,["components","mdxType","originalType","parentName"]),l=c(n),p=o,m=l["".concat(u,".").concat(p)]||l[p]||h[p]||s;return n?a.createElement(m,i(i({ref:e},d),{},{components:n})):a.createElement(m,i({ref:e},d))}));function m(t,e){var n=arguments,o=e&&e.mdxType;if("string"==typeof t||o){var s=n.length,i=new Array(s);i[0]=p;var r={};for(var u in e)hasOwnProperty.call(e,u)&&(r[u]=e[u]);r.originalType=t,r[l]="string"==typeof t?t:o,i[1]=r;for(var c=2;c<s;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},59051:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>u,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var a=n(58168),o=(n(96540),n(15680));const s={title:"Updating Account Statuses",id:"studentapi-updateaccountstatus-details",sidebar_position:1,author:"Jim Burns",published:"",edited:""},i=void 0,r={unversionedId:"student/best-practices/studentapi-updateaccountstatus-details",id:"student/best-practices/studentapi-updateaccountstatus-details",title:"Updating Account Statuses",description:'There is capability within Anthology Student to associate one or more account statuses with a student enrollment period record.  This makes it possible for an institution to perform various actions on groups of students based on the account status values associated.  Many times, the assignment of an account status will be triggered by an action that occurs or a specific data point.  For example, an account status of "Delinquent" may be associated with a student who has one or more expected installments for a payment plan that have not been received but have a due date in the past.  In many cases, managing the account statuses for students is a key use case that needs to be accomplished within an overall integration project.  This document will cover the details for how to effectively manage account statuses for students utilizing the available API endpoints.',source:"@site/docs/student/best-practices/AccountStatuses.md",sourceDirName:"student/best-practices",slug:"/student/best-practices/studentapi-updateaccountstatus-details",permalink:"/docs/student/best-practices/studentapi-updateaccountstatus-details",draft:!1,editUrl:"https://github.com/blackboard/anthologydevdocs/tree/main/docs/student/best-practices/AccountStatuses.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Updating Account Statuses",id:"studentapi-updateaccountstatus-details",sidebar_position:1,author:"Jim Burns",published:"",edited:""},sidebar:"documentationSidebar",previous:{title:"Student REST API: First Steps",permalink:"/docs/student/getting-started/first-steps"},next:{title:"Determining Account Balances for Students",permalink:"/docs/student/best-practices/studentapi-accountbalance-details"}},u={},c=[{value:"Data model notes",id:"data-model-notes",level:2},{value:"API endpoint",id:"api-endpoint",level:2},{value:"Determining the StudentEnrollmentPeriodId",id:"determining-the-studentenrollmentperiodid",level:3},{value:"Authorization",id:"authorization",level:2},{value:"Conclusion",id:"conclusion",level:2}],d={toc:c},l="wrapper";function h(t){let{components:e,...s}=t;return(0,o.yg)(l,(0,a.A)({},d,s,{components:e,mdxType:"MDXLayout"}),(0,o.yg)("p",null,'There is capability within Anthology Student to associate one or more account statuses with a student enrollment period record.  This makes it possible for an institution to perform various actions on groups of students based on the account status values associated.  Many times, the assignment of an account status will be triggered by an action that occurs or a specific data point.  For example, an account status of "Delinquent" may be associated with a student who has one or more expected installments for a payment plan that have not been received but have a due date in the past.  In many cases, managing the account statuses for students is a key use case that needs to be accomplished within an overall integration project.  This document will cover the details for how to effectively manage account statuses for students utilizing the available API endpoints.  '),(0,o.yg)("h2",{id:"data-model-notes"},"Data model notes"),(0,o.yg)("p",null,"The entity that stores account statuses associated with a given student is StudentAccountStatus. A couple of important points to note are that each account status is associated with a StudentEnrollmentPeriod and not a Student.   Thus, you will see a StudentEnrollmentPeriodId property on this entity but there is not a StudentId property.  Additionally, a student enrollment period can have multiple statuses assigned.  It is also important to note, that this entity can hold account status associations for two different types.   There are account statuses that are used for the Collections feature in the Student Accounts domain as well as account statuses that are utilized for the student's main ledger card account.  When configuring account statuses, there is a property that specifies how that account status will be used.  It can be configured to be used only for the Collections feature, only for the main ledger card or be used for both.  The entity that stores the account statuses that have been configured is AccountStatus."),(0,o.yg)("p",null,"To see the account statuses that have been configured, execute an odata query as follows:   ds/odata/AccountStatuses?$select=Id,Code,Name,IsActive,CampusGroupId,Usage"),(0,o.yg)("p",null,"The IsActive property specifies if the record is active.  If this value is 0, then the account status is inactive and not able to be assigned to a student.  The Usage property specifies the type of account status.  As mentioned above, if the value is 'C', then it is used exclusively for the Collections feature.  If this is the case, then this status cannot be associated with a student via the updateStudentAccountStatus endpoint outlined below.   If the value is 'A' (used for main ledger card account status) or 'B' (used for both) then the account status can be assigned via the endpoint below."),(0,o.yg)("h2",{id:"api-endpoint"},"API endpoint"),(0,o.yg)("p",null,"The API to use for managing account statuses associated to an enrollment is api/commands/StudentAccounts/StudentAccountTransaction/updateStudentAccountStatus .  "),(0,o.yg)("p",null,"To access the Swagger documentation, append 'swagger' to the end of the base URI that is used to launch the Anthology Student web client application.  Once the Swagger landing page is loaded, use the Domain and Functional Area dropdown filters at the top of the swagger page to access the documentation.  To access this API endpoint, select 'Student Accounts' for Domain and 'Ledger Card' for Functional Area and then select Refresh.  Find the StudentAccountTransaction entity in the displayed list of entities and then click the lightning bolt icon.  The list of APIs for this entity will be displayed.  The api/commands/StudentAccountTransaction/updateStudentAccountStatus will be one of the endpoints in the displayed list."),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"AccountStatuses",src:n(22939).A,width:"1526",height:"872"})," "),(0,o.yg)("p",null,"Some important points regarding this API:"),(0,o.yg)("p",null,"The only two properties that need to be provided in the request payload are the StudentEnrollmentPeriodId and the StudentAccountStatusList.  The StudentAccountStatusList is defined as a List of type int.  Provide the AccountStatusId for each account status that will be associated with the student enrollment period.  The other properties defined in the request can be ignored."),(0,o.yg)("p",null,"Account statuses are assigned at the StudentEnrollmentPeriod level and not the Student. So if a student has more than 1 enrollment period record, an initial step may need to be done to determine which enrollment period you need to associate the account status(es) to. See additional details below"),(0,o.yg)("p",null,"An enrollment period can have multiple account statuses associated.  The logic within this API will fully replace any account statuses that are currently associated with the provided StudentEnrollmentPeriodId with the AccountStatusIds specified in the StudentAccountStatusList property. So if a student enrollment already has one account status associated and an additional account status needs to be associated, make sure the StudentAccountStatusList property includes the Id of the existing account status already associated plus the Id of the new account status being associated."),(0,o.yg)("h3",{id:"determining-the-studentenrollmentperiodid"},"Determining the StudentEnrollmentPeriodId"),(0,o.yg)("p",null,"If you do not have the correct value for the StudentEnrollmentPeriodId property, then this can be determined using one of two approaches.  The prerequisite to using either of these approaches is that you must have the StudentId of the student that the account statuses are being updated for.  The first approach is to use an available API endpoint that will take the StudentId as an input parameter and return the StudentEnrollmentPeriodId of the \"current\" enrollment.  Anthology Student has built in logic that uses the school status and enrollment date for enrollment period records for a student to determine the \"current\" enrollment.  This option works well if it is uncommon for a student to have more than one enrollment record that has an Active school status at any given point in time.  The endpoint that returns the current enrollment is ds/campusnexus/Students/CampusNexus.GetCurrentEnrollmentByStudentId. To find this in Swagger, select 'Common' as the Domain and 'Students' as the Functional Area and then click Refresh."),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"AccountStatuses",src:n(25376).A,width:"1909",height:"761"})," "),(0,o.yg)("p",null,"If concurrently active enrollment records is a common scenario at an institution, then it is recommended to use the second approach which is to execute an OData query to return the enrollment records for a given StudentId.  Additional logic must be applied on the result set returned to determine which StudentEnrollmentPeriodId to associate the Account Statuses to.   This logic will depend on the requirements of the institution on what criteria/rules are in place for knowing which enrollment record is the correct enrollment to associate the account statuses to.  The basic odata query to execute for returning enrollment records for a student is ds/odata/StudentEnrollmentPeriods?$filter=StudentId eq #######&$select=Id,SchoolStatusId,EnrollmentDate,ProgramVersionName&$expand=SchoolStatus($select=Code)  where ######## is the StudentId of the student.  The specific data to return via the $select clause will depend on what data from the StudentEnrollmentPeriod entity needs to be evaluated in order to determine the correct StudentEnrollmentperiodId to associate the account statuses to."),(0,o.yg)("h2",{id:"authorization"},"Authorization"),(0,o.yg)("p",null,"In order to execute the APIs that have been discussed above, proper authorization needs to be configured. Whether using Basic Auth or OAuth with application key to authenticate, the user context the APIs are executing under will be a user record from the Staff entity. This is the user that authorization needs to be configured for. You must have access to the Security Console application in order to set the needed permissions. In order to execute the updateStudentAccountStatus API, the user must be authorized for the Student Accounts - Student Account Transaction - Edit task."),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"AccountStatuses",src:n(49577).A,width:"1482",height:"906"})," "),(0,o.yg)("h2",{id:"conclusion"},"Conclusion"),(0,o.yg)("p",null,"There can likely be additional nuances/details around utilizing this API that are not covered within this document. If there are any questions after reviewing this document, you can submit them by sending an email to ",(0,o.yg)("a",{parentName:"p",href:"mailto:developers@anthology.com"},"developers@anthology.com"),"."))}h.isMDXComponent=!0},22939:(t,e,n)=>{n.d(e,{A:()=>a});const a=n.p+"assets/images/AccountStatuses1-b31086e3c1813c1b62cb36db11db6e82.png"},25376:(t,e,n)=>{n.d(e,{A:()=>a});const a=n.p+"assets/images/AccountStatuses2-36ba9f29ca8065e1abaedfda419748ac.png"},49577:(t,e,n)=>{n.d(e,{A:()=>a});const a=n.p+"assets/images/AccountStatuses3-f5896aef9f615afa740017cba162a096.png"}}]);