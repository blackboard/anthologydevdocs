"use strict";(globalThis.webpackChunkanthology_dev_docs=globalThis.webpackChunkanthology_dev_docs||[]).push([[7862],{28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>l});var i=n(96540);const o={},r=i.createContext(o);function s(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:t},e.children)}},53038:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/uef-flow-3671f1e520868b19624b2e14bb6428b6.png"},54070:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/uef-launch-flow-d5b8d664c7230e2331c07af846bbeb66.png"},62651:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/uef-rest-flow-659252265141cb483267edc4e3d32974.png"},62672:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/uef-lti-flow-2856aa5da6ca800e876f5ec2074395cb.png"},80983:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"blackboard/uef/how-it-works","title":"Working with UEF","description":"In its core, the Ultra Extension Framework leverages the Core LTI 1.3 and REST API frameworks to provide an authentication mechanism, allowing you to focus on delivering the information based on the user making the request.","source":"@site/docs/blackboard/uef/02-how-it-works.md","sourceDirName":"blackboard/uef","slug":"/blackboard/uef/how-it-works","permalink":"/docs/blackboard/uef/how-it-works","draft":false,"unlisted":false,"editUrl":"https://github.com/blackboard/anthologydevdocs/tree/main/docs/blackboard/uef/02-how-it-works.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Working with UEF","id":"how-it-works","sidebar_position":2,"edited":"2024-10-11"},"sidebar":"documentationSidebar","previous":{"title":"What is UEF","permalink":"/docs/blackboard/uef/getting-started"},"next":{"title":"Before you start developing for UEF","permalink":"/docs/blackboard/uef/uef-requirements"}}');var o=n(74848),r=n(28453);const s={title:"Working with UEF",id:"how-it-works",sidebar_position:2,edited:"2024-10-11"},l=void 0,a={},c=[{value:"The flow",id:"the-flow",level:2},{value:"User Access",id:"user-access",level:3},{value:"LTI block",id:"lti-block",level:3},{value:"REST API block",id:"rest-api-block",level:3},{value:"UEF Block",id:"uef-block",level:3}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components},{Details:i}=t;return i||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"In its core, the Ultra Extension Framework leverages the Core LTI 1.3 and REST API frameworks to provide an authentication mechanism, allowing you to focus on delivering the information based on the user making the request."}),"\n",(0,o.jsxs)(t.p,{children:["The way UEF works is by injecting a JavaScript file at loading time into the Ultra window, which creates a two-way communication tunnel (based on the ",(0,o.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/MessageChannel/MessageChannel",children:"MessageChannel"})," interface). This file will serve as the bridge between the Ultra window and your external services and will provide an entry point for customization."]}),"\n",(0,o.jsx)(t.h2,{id:"the-flow",children:"The flow"}),"\n",(0,o.jsx)(t.p,{children:"As mentioned above, the framework uses LTI 1.3 and REST API to perform an authentication phase and ends up with the injection of the file into the browser window. The following diagram describes this scenario and how everything interconnects, each step is described below:"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Diagram of the flow used by UEF",src:n(53038).A+"",width:"2146",height:"1168"})}),"\n",(0,o.jsx)(t.h3,{id:"user-access",children:"User Access"}),"\n",(0,o.jsx)(t.p,{children:"By definition, the UEF integration triggers and performs the LTI call when the user logs in to Learn, the user doesn't have to perform any authorization process and all happens in the background."}),"\n",(0,o.jsx)(t.h3,{id:"lti-block",children:"LTI block"}),"\n",(0,o.jsxs)(t.p,{children:["This block follow the same process for an LTI Message Flow described by the Core LTI 1.3 specifications, this will verify that the integration is allowed to perform operations within the Blackboard Learn server and will review if the user is allowed to launch the integration. Below is a brief overview of the LTI flow, for more information about this, flow please refer to ",(0,o.jsx)(t.a,{href:"/docs/blackboard/lti/1.3/core/core-launch",children:"LTI Message Launch Flow"}),":"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Diagram of the flow used by Core LTI 1.3",src:n(62672).A+"",width:"3478",height:"1980"})}),"\n",(0,o.jsx)(t.h3,{id:"rest-api-block",children:"REST API block"}),"\n",(0,o.jsxs)(t.p,{children:["Once the LTI step is completed and Learn has sent to your tool the JWT token containing all the information about the user and context, you need to redirect the request to the REST API authentication endpoint to start a 3-Legged OAuth flow which will give you a bearer token tailored to the user's privileges and entitlements. This process follows the standard 3-Legged OAuth flow described below, for more information about this flow, please refer to ",(0,o.jsx)(t.a,{href:"/docs/blackboard/rest-apis/getting-started/3lo",children:"3-Legged OAuth"})]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Diagram of the flow used by REST API using 3LO",src:n(62651).A+"",width:"2198",height:"1960"})}),"\n",(0,o.jsx)(t.p,{children:"Based on the application you want to integrate, you can scope the token to just a few privileges, the following is a table where you can see the available scopes for UEF and their definitions"}),"\n",(0,o.jsx)(t.p,{children:"This table lists all the available scopes and what you might need them for."}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{style:{textAlign:"center"},children:"Scope name"}),(0,o.jsx)(t.th,{style:{textAlign:"center"},children:"Syntax"}),(0,o.jsx)(t.th,{style:{textAlign:"center"},children:"Associated Events"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{style:{textAlign:"center"},children:"ALL_AUTH_TYPE"}),(0,o.jsx)(t.td,{style:{textAlign:"center"},children:"*"}),(0,o.jsx)(t.td,{style:{textAlign:"center"},children:"Gives all scopes"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{style:{textAlign:"center"},children:"ANALYTICS_AUTH_TYPE"}),(0,o.jsxs)(t.td,{style:{textAlign:"center"},children:["\u201cultra",":analytics-event","\u201d"]}),(0,o.jsx)(t.td,{style:{textAlign:"center"},children:"click,hover"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{style:{textAlign:"center"},children:"HELP_PROVIDER_TYPE"}),(0,o.jsxs)(t.td,{style:{textAlign:"center"},children:["\u201cultra",":help","\u201d"]}),(0,o.jsxs)(t.td,{style:{textAlign:"center"},children:["help",":register"]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{style:{textAlign:"center"},children:"PORTAL_AUTH_TYPE"}),(0,o.jsxs)(t.td,{style:{textAlign:"center"},children:["\u201cultra",":portal","\u201d"]}),(0,o.jsxs)(t.td,{style:{textAlign:"center"},children:["portal",":new",",portal",":remove"]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{style:{textAlign:"center"},children:"PORTAL_MODAL_AUTH_TYPE"}),(0,o.jsxs)(t.td,{style:{textAlign:"center"},children:["\u201cultra",":modal","\u201d"]}),(0,o.jsxs)(t.td,{style:{textAlign:"center"},children:["portal",":modal"]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{style:{textAlign:"center"},children:"PORTAL_NOTIFICATION_AUTH_TYPE"}),(0,o.jsxs)(t.td,{style:{textAlign:"center"},children:["\u201cultra",":notification","\u201d"]}),(0,o.jsxs)(t.td,{style:{textAlign:"center"},children:["portal",":notification"]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{style:{textAlign:"center"},children:"ROUTE_AUTH_TYPE"}),(0,o.jsxs)(t.td,{style:{textAlign:"center"},children:["\u201cultra",":route-event","\u201d"]}),(0,o.jsxs)(t.td,{style:{textAlign:"center"},children:["route,route",":changing"]})]})]})]}),"\n",(0,o.jsx)(t.admonition,{type:"caution",children:(0,o.jsx)(t.p,{children:"This step is required since the UEF integration uses the user bearer token to provide access to the Ultra UI and allow the rendering and addition of services."})}),"\n",(0,o.jsx)(t.h3,{id:"uef-block",children:"UEF Block"}),"\n",(0,o.jsx)(t.p,{children:"Once the REST API authentication is authenticated, your tool redirect to an HTML page where you can add your JavaScript file for injection, along with the bearer token received from the previous block. A simple example of this page can be found below"}),"\n",(0,o.jsxs)(i,{children:[(0,o.jsx)("summary",{children:(0,o.jsx)(t.p,{children:"HTML page with JavaScript injection"})}),(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <title>Injecting the JS file</title>\n    <script src="<route-to-your-js-file.js>" defer><\/script>\n  </head>\n  <body>\n    <p id="bearer-token">bearer-token-from-rest-api</p>\n  </body>\n</html>\n'})})]}),"\n",(0,o.jsx)(t.p,{children:"From here, you can authenticate to UEF using the token which will create a private communication tunnel between your JavaScript file and Ultra, allowing you to render UI components, add links, create course banners, etc."}),"\n",(0,o.jsx)(t.p,{children:"This is the flow your integration will have to follow to authenticate to UEF, each of these steps will be reviewed in the following section"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Diagram of the flow used by the UEF launch",src:n(54070).A+"",width:"2158",height:"1978"})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);