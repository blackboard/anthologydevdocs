"use strict";(self.webpackChunkanthology_dev_docs=self.webpackChunkanthology_dev_docs||[]).push([[5477],{15680:(e,t,a)=>{a.d(t,{xA:()=>g,yg:()=>y});var n=a(96540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),s=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},g=function(e){var t=s(e.components);return n.createElement(d.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,d=e.parentName,g=o(e,["components","mdxType","originalType","parentName"]),p=s(a),m=r,y=p["".concat(d,".").concat(m)]||p[m]||u[m]||l;return a?n.createElement(y,i(i({ref:t},g),{},{components:a})):n.createElement(y,i({ref:t},g))}));function y(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o[p]="string"==typeof e?e:r,i[1]=o;for(var s=2;s<l;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},18001:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>s});var n=a(58168),r=(a(96540),a(15680));const l={title:"Interacting with Grades",id:"ags-grades",sidebar_position:3,edited:"2024-10-09"},i=void 0,o={unversionedId:"blackboard/lti/1.3/lti-subsystems/ags/ags-grades",id:"blackboard/lti/1.3/lti-subsystems/ags/ags-grades",title:"Interacting with Grades",description:"Now that you have a way to get the column information from the course and/or create new columns in a course, we can start working with grades, specially posting grades and creating attempts on LTI columns. This part of the service only accepts a POST request to either create a new grade or update/delete an existing grade (this will depend on the properties and values included on the request body).",source:"@site/docs/blackboard/lti/1.3/lti-subsystems/ags/03-working-with-grades.md",sourceDirName:"blackboard/lti/1.3/lti-subsystems/ags",slug:"/blackboard/lti/1.3/lti-subsystems/ags/ags-grades",permalink:"/docs/blackboard/lti/1.3/lti-subsystems/ags/ags-grades",draft:!1,editUrl:"https://github.com/blackboard/anthologydevdocs/tree/main/docs/blackboard/lti/1.3/lti-subsystems/ags/03-working-with-grades.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Interacting with Grades",id:"ags-grades",sidebar_position:3,edited:"2024-10-09"},sidebar:"documentationSidebar",previous:{title:"Interacting with Columns",permalink:"/docs/blackboard/lti/1.3/lti-subsystems/ags/ags-columns"},next:{title:"Interacting with Results",permalink:"/docs/blackboard/lti/1.3/lti-subsystems/ags/ags-result"}},d={},s=[{value:"Gather the user ID",id:"gather-the-user-id",level:2},{value:"REST API",id:"rest-api",level:3},{value:"LTI launch",id:"lti-launch",level:3},{value:"Names and Roles Provisioning Service",id:"names-and-roles-provisioning-service",level:3},{value:"Posting the user grade",id:"posting-the-user-grade",level:2},{value:"Headers",id:"headers",level:3},{value:"Body",id:"body",level:3},{value:"Create a new grade or update an existing grade",id:"create-a-new-grade-or-update-an-existing-grade",level:4},{value:"Delete an existing grade",id:"delete-an-existing-grade",level:4},{value:"Table of Reference for grade properties",id:"table-of-reference-for-grade-properties",level:2}],g={toc:s},p="wrapper";function u(e){let{components:t,...a}=e;return(0,r.yg)(p,(0,n.A)({},g,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"Now that you have a way to get the column information from the course and/or create new columns in a course, we can start working with grades, specially posting grades and creating attempts on LTI columns. This part of the service only accepts a ",(0,r.yg)("inlineCode",{parentName:"p"},"POST")," request to either create a new grade or update/delete an existing grade (this will depend on the properties and values included on the request body)."),(0,r.yg)("h2",{id:"gather-the-user-id"},"Gather the user ID"),(0,r.yg)("p",null,"Before you can post a new grade, you need to get the information of the user that will receive the grade on Blackboard Learn, this can be gathered through the different methods outlined next."),(0,r.yg)("h3",{id:"rest-api"},"REST API"),(0,r.yg)("p",null,"If your LTI application is also registered in the environment as a REST API integration, you can get the user information (querying by email, username, names, etc.) from the endpoint /learn/api/public/v1/users (more information about this endpoint and the query parameters needed here: ",(0,r.yg)("a",{parentName:"p",href:"https://developer.blackboard.com/portal/displayApi/Learn"},"https://developer.blackboard.com/portal/displayApi/Learn"),")."),(0,r.yg)("p",null,"From the response, you need to get the ",(0,r.yg)("inlineCode",{parentName:"p"},"uuid")," field which will be ID required to post grades. An example of an API request for a user looks like this:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "results": [\n    {\n      "id": "_702_1",\n      "uuid": "b317a895e7f64796a3fd01bb18a61d65",\n      "externalId": "student-acc",\n      "dataSourceId": "_2_1",\n      "userName": "student-acc",\n      "created": "2023-08-04T14:43:09.623Z",\n      "modified": "2024-09-12T15:16:23.925Z",\n      "lastLogin": "2024-09-12T15:16:23.925Z",\n      "institutionRoleIds": ["STUDENT"],\n      "systemRoleIds": ["User"],\n      "availability": {\n        "available": "Yes"\n      },\n      "name": {\n        "given": "Student",\n        "family": "Account",\n        "preferredDisplayName": "GivenName"\n      },\n      "contact": {\n        "email": "student@example.com"\n      }\n    }\n  ]\n}\n')),(0,r.yg)("h3",{id:"lti-launch"},"LTI launch"),(0,r.yg)("p",null,"If the user that will receive the grade on Blackboard Learn is the one performing the LTI launch, the claim ",(0,r.yg)("inlineCode",{parentName:"p"},"sub")," included in the JWT token sent to your tool can be used to get the ID of the user"),(0,r.yg)("h3",{id:"names-and-roles-provisioning-service"},"Names and Roles Provisioning Service"),(0,r.yg)("p",null,"The last option to get the user ID from Blackboard Learn is to use the Names and Roles Provisioning Service (NRPS) to get the roster from the course and extract the ID of the user. This service will be outlined in detail in later sections but from the response objects of the service you can obtain the ID from the ",(0,r.yg)("inlineCode",{parentName:"p"},"user_id")," property. The example below is a response object from NRPS with the information:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "https://partner-test3.blackboard.com/learn/api/v1/lti/external/namesandroles/_220_1?groups=true",\n  "context": {\n    "id": "c2d7fe850a8e4af2b7f6d483edea773b",\n    "label": "adv-math-fall24",\n    "title": "Advanced Math - Fall 2024"\n  },\n  "members": [\n    {\n      "status": "Active",\n      "name": "Student Account",\n      "given_name": "Student",\n      "family_name": "Account",\n      "middle_name": "",\n      "email": "student@example.com",\n      "user_id": "b317a895e7f64796a3fd01bb18a61d65",\n      "lis_person_sourcedid": "student-acc",\n      "roles": [\n        "http://purl.imsglobal.org/vocab/lis/v2/membership#Learner",\n        "http://purl.imsglobal.org/vocab/lis/v2/institution/person#Student"\n      ],\n      "group_enrollments": []\n    }\n  ]\n}\n')),(0,r.yg)("h2",{id:"posting-the-user-grade"},"Posting the user grade"),(0,r.yg)("p",null,"Now that you have the ID of the user, you can perform a POST request to send the grade details to Blackboard Learn. The request sent to blackboard should contain the following information:"),(0,r.yg)("h3",{id:"headers"},"Headers"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Header"),(0,r.yg)("th",{parentName:"tr",align:null},"Value"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Content-Type")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"application/vnd.ims.lis.v2.lineitem+json"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Anthorization")),(0,r.yg)("td",{parentName:"tr",align:null},"Bearer token obtained from the authentication section ",(0,r.yg)("a",{parentName:"td",href:"/docs/blackboard/lti/1.3/lti-subsystems/lti-sub-authentication"},"Here"))))),(0,r.yg)("h3",{id:"body"},"Body"),(0,r.yg)("p",null,"Based on the type of action that you want to perform, the body will change. The following are the minimum required properties needed for each action. The breakdown of required and optional properties can be found at the end of the document"),(0,r.yg)("h4",{id:"create-a-new-grade-or-update-an-existing-grade"},"Create a new grade or update an existing grade"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "userId": "c2d7fe850a8e4af2b7f6d483edea773b",\n  "scoreGiven": 95.4,\n  "timestamp": "2008-05-26T01:32:13Z",\n  "activityProgress": "Completed",\n  "gradingProgress": "FullyGraded"\n}\n')),(0,r.yg)("h4",{id:"delete-an-existing-grade"},"Delete an existing grade"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "userId": "c2d7fe850a8e4af2b7f6d483edea773b",\n  "timestamp": "2008-05-26T01:32:13Z",\n  "activityProgress": "Initialized",\n  "gradingProgress": "NotReady"\n}\n')),(0,r.yg)("h2",{id:"table-of-reference-for-grade-properties"},"Table of Reference for grade properties"),(0,r.yg)("p",null,"the table below outlines and defines the possible properties the JSON body could have at any given time"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Property"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"),(0,r.yg)("th",{parentName:"tr",align:null},"Required"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Default"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"userId")),(0,r.yg)("td",{parentName:"tr",align:null},"The ID of the user gathered from any of the methods above"),(0,r.yg)("td",{parentName:"tr",align:null},"Yes"),(0,r.yg)("td",{parentName:"tr",align:null},"String"),(0,r.yg)("td",{parentName:"tr",align:null},"N/A")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"scoreGiven")),(0,r.yg)("td",{parentName:"tr",align:null},"The grade of the user"),(0,r.yg)("td",{parentName:"tr",align:null},"No"),(0,r.yg)("td",{parentName:"tr",align:null},"double"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"null"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"timestamp")),(0,r.yg)("td",{parentName:"tr",align:null},"Date where the grade was sent to Blackboard Learn"),(0,r.yg)("td",{parentName:"tr",align:null},"Yes"),(0,r.yg)("td",{parentName:"tr",align:null},"Date String (ISO)"),(0,r.yg)("td",{parentName:"tr",align:null},"N/A")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"activityProgress")),(0,r.yg)("td",{parentName:"tr",align:null},"Completion status of the activity started by the user/learner"),(0,r.yg)("td",{parentName:"tr",align:null},"Yes"),(0,r.yg)("td",{parentName:"tr",align:null},"String"),(0,r.yg)("td",{parentName:"tr",align:null},"N/A")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"gradingProgress")),(0,r.yg)("td",{parentName:"tr",align:null},"Completion status of the grading by the instructor/teacher"),(0,r.yg)("td",{parentName:"tr",align:null},"Yes"),(0,r.yg)("td",{parentName:"tr",align:null},"String"),(0,r.yg)("td",{parentName:"tr",align:null},"N/A")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"comment")),(0,r.yg)("td",{parentName:"tr",align:null},"Feedback to the user, visible through the feedback section of Blackboard Learn"),(0,r.yg)("td",{parentName:"tr",align:null},"No"),(0,r.yg)("td",{parentName:"tr",align:null},"String"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"null"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"submission")),(0,r.yg)("td",{parentName:"tr",align:null},"Object that contains the properties ",(0,r.yg)("inlineCode",{parentName:"td"},"submissionId"),", ",(0,r.yg)("inlineCode",{parentName:"td"},"startedAt")," and ",(0,r.yg)("inlineCode",{parentName:"td"},"submittedAt")),(0,r.yg)("td",{parentName:"tr",align:null},"No"),(0,r.yg)("td",{parentName:"tr",align:null},"Object"),(0,r.yg)("td",{parentName:"tr",align:null},"N/A")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"submissionId")),(0,r.yg)("td",{parentName:"tr",align:null},"An ID from the LTI tool to cross-Reference"),(0,r.yg)("td",{parentName:"tr",align:null},"No"),(0,r.yg)("td",{parentName:"tr",align:null},"String"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"null"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"startedAt")),(0,r.yg)("td",{parentName:"tr",align:null},"The timestamp of when the user started the activity"),(0,r.yg)("td",{parentName:"tr",align:null},"No"),(0,r.yg)("td",{parentName:"tr",align:null},"Date String (ISO)"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"null"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"submittedAt")),(0,r.yg)("td",{parentName:"tr",align:null},"The timestamp of when the activity was submitted"),(0,r.yg)("td",{parentName:"tr",align:null},"No"),(0,r.yg)("td",{parentName:"tr",align:null},"Date String (ISO)"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"null"))))),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"Information about the activityProgress and gradingProgress values can be found here: ",(0,r.yg)("a",{parentName:"p",href:"https://www.imsglobal.org/spec/lti-ags/v2p0#activityprogress"},"https://www.imsglobal.org/spec/lti-ags/v2p0#activityprogress"))))}u.isMDXComponent=!0}}]);