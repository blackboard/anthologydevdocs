"use strict";(self.webpackChunkanthology_dev_docs=self.webpackChunkanthology_dev_docs||[]).push([[9852],{4137:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),p=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(i.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(a),m=r,h=u["".concat(i,".").concat(m)]||u[m]||d[m]||o;return a?n.createElement(h,l(l({ref:t},c),{},{components:a})):n.createElement(h,l({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[u]="string"==typeof e?e:r,l[1]=s;for(var p=2;p<o;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2350:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>k,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var n=a(7462),r=(a(7294),a(4137));const o={title:"cURL Demo",id:"curl-demo",categories:"Learn Rest",published:"",edited:"",author:"Mark Kauffman"},l=void 0,s={unversionedId:"rest-apis/learn/examples/curl-demo",id:"rest-apis/learn/examples/curl-demo",title:"cURL Demo",description:"Introduction",source:"@site/docs/rest-apis/learn/examples/curl-demo.md",sourceDirName:"rest-apis/learn/examples",slug:"/rest-apis/learn/examples/curl-demo",permalink:"/docs/rest-apis/learn/examples/curl-demo",draft:!1,tags:[],version:"current",frontMatter:{title:"cURL Demo",id:"curl-demo",categories:"Learn Rest",published:"",edited:"",author:"Mark Kauffman"},sidebar:"documentationSidebar",previous:{title:"Using cURL to access content attachments",permalink:"/docs/rest-apis/learn/examples/curl-attach-demo"},next:{title:"Demo using Golang",permalink:"/docs/rest-apis/learn/examples/golang-demo"}},i={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Assumptions",id:"assumptions",level:3},{value:"Walkthrough",id:"walkthrough",level:3},{value:"Authorization and Authentication",id:"authorization-and-authentication",level:2},{value:"OAuth2 Basic (Two Legged)",id:"oauth2-basic-two-legged",level:3},{value:"OAuth2 (Three Legged) - 3LO",id:"oauth2-three-legged---3lo",level:3},{value:"Calling Services",id:"calling-services",level:3},{value:"DATASOURCES",id:"datasources",level:3},{value:"USERS",id:"users",level:3},{value:"COURSE GRADES",id:"course-grades",level:3},{value:"ACCESS CONTENT",id:"access-content",level:3},{value:"COURSE COPY",id:"course-copy",level:3},{value:"ADD CONTENT",id:"add-content",level:3},{value:"CREATE ASSIGNMENT WITH ATTACHMENT",id:"create-assignment-with-attachment",level:3},{value:"SUBMIT ASSIGNMENT ATTEMPT WITH ATTACHMENT",id:"submit-assignment-attempt-with-attachment",level:3},{value:"Common Errors",id:"common-errors",level:3},{value:"Conclusion",id:"conclusion",level:3}],c=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},u=c("VersioningTracker"),d=c("AuthorBox"),m={toc:p},h="wrapper";function k(e){let{components:t,...l}=e;return(0,r.kt)(h,(0,n.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(u,{frontMatter:o,mdxType:"VersioningTracker"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The rest demo script demonstrates authenticating a REST application,\nmanagement and use of the authorization token, and creating, updating,\ndiscovering, and deleting the Data Source and User Learn objects. A video\npresentation using this material plus an explanation of how to register your\nREST application on the Developer Portal, and how to configure your\napplication's REST integration on your Learn development system, is available\n",(0,r.kt)("a",{parentName:"p",href:"http://bit.ly/RestTechDeepDive4Partners"},"here"),". Here\nis the ",(0,r.kt)("a",{target:"_blank",href:a(8166).Z},"slide deck")),(0,r.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You must ",(0,r.kt)("a",{parentName:"li",href:"/docs/developer-portal/start-here"},"register a developer account and application")," in the Developer Portal"),(0,r.kt)("li",{parentName:"ul"},"You must\n",(0,r.kt)("a",{parentName:"li",href:"/docs/developer-portal/creating-new-rest-or-lti-application"},"register your application")," in Learn"),(0,r.kt)("li",{parentName:"ul"},"You must also configure the script as outlined in the README for the project")),(0,r.kt)("p",null,"This cURL command-line demonstration shows you how to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Authenticate"),(0,r.kt)("li",{parentName:"ul"},"Create a Data Source"),(0,r.kt)("li",{parentName:"ul"},"Create, Read, and Update a User"),(0,r.kt)("li",{parentName:"ul"},"Delete created objects in reverse order of create - user, datasource."),(0,r.kt)("li",{parentName:"ul"},"Create a grade column and add a grade."),(0,r.kt)("li",{parentName:"ul"},"Upload a file to a content area.")),(0,r.kt)("p",null,"All generated output is sent to the terminal."),(0,r.kt)("p",null,"This is not meant to be a cURL tutorial. It will not teach you to use cURL. It\nwill, however, give a Developer familiar with cURL the knowledge necessary to\nmake a complete set of CRUD operations to the Learn REST endpoints."),(0,r.kt)("h3",{id:"assumptions"},"Assumptions"),(0,r.kt)("p",null,"This help topic assumes the Developer:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"is familiar with cURL."),(0,r.kt)("li",{parentName:"ul"},"has a REST-enabled ",(0,r.kt)("a",{parentName:"li",href:"/docs/rest-apis/learn/sandbox/developer-ami"},"Learn instance"),".")),(0,r.kt)("h3",{id:"walkthrough"},"Walkthrough"),(0,r.kt)("p",null,"To build an integration with the Learn REST Web Services, regardless of\nthe programming language of choice, can really be summed up in two steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Use the Application Key and Secret to obtain an ",(0,r.kt)("strong",{parentName:"li"},"OAuth 2.0 access token"),", as described in the ",(0,r.kt)("a",{parentName:"li",href:"/docs/rest-apis/learn/getting-started/basic-authentication"},"Basic Authentication")," document.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"OR")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Use the authorizationcode endpoint to log into Learn with a given user's credentials, then obtain an ",(0,r.kt)("strong",{parentName:"li"},"OAuth 2.0 access token"),", using the application key/secret, that only allows access to the system based on that particular user's entitlements as described in the ",(0,r.kt)("a",{parentName:"li",href:"/docs/rest-apis/learn/getting-started/3lo"},"Three-Legged OAuth")," document."),(0,r.kt)("li",{parentName:"ol"},"Call the appropriate REST endpoint with the ",(0,r.kt)("strong",{parentName:"li"},"OAuth 2.0 access token")," and necessary data to perform a given action.")),(0,r.kt)("p",null,"Every example is shown in bold face, the JSON result is shown in italics."),(0,r.kt)("h2",{id:"authorization-and-authentication"},"Authorization and Authentication"),(0,r.kt)("h3",{id:"oauth2-basic-two-legged"},"OAuth2 Basic (Two Legged)"),(0,r.kt)("p",null,"The REST Services rely on OAuth 2.0 Bearer Tokens for authentication. A\nrequest is made to the token endpoint with a Basic Authorization header\ncontaining the base64-encoded key:secret string as its key. The token service\nreturns a JSON object containing the Access Token, the Token Type, and the\nnumber of seconds until the token expires. The token is set to expire after\none hour, and subsequent calls to retrieve the token will return the same\ntoken with an updated expiry time until such time that the token has expired.\nThere is no refresh token and currently no revoke token method."),(0,r.kt)("p",null,"You can do this with cURL with the following command line. We use the -k\nparameter to ignore issues caused by the self-signed certificate."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k --user <key>:<secret> --data "grant_type=client_credentials"\nhttps://<LearnHost>/learn/api/public/v1/oauth2/token\n')),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k --user d128e50d-c91e-47d3-a97e-9d0c8a87fb5d:kLpiuq34320jqreaiJIRoareASELERREv56\n--data "grant_type=client_credentials"  https://localhost%3A9877/learn/api/public/v1/oauth2/token\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz",\n  "token_type": "bearer",\n  "expires_in": 3444\n}\n')),(0,r.kt)("p",null,"The JSON response is serialized into the Token object as shown above, and you\nmay then retrieve those values from that object by using copy and paste. You\nwill use the value given for the access_token when calling the services as\nshown in the ",(0,r.kt)("a",{parentName:"p",href:"#calling-services"},(0,r.kt)("strong",{parentName:"a"},"Calling Services"))," section."),(0,r.kt)("h3",{id:"oauth2-three-legged---3lo"},"OAuth2 (Three Legged) - 3LO"),(0,r.kt)("p",null,"To work with 3LO you will need both a browser, to log into Learn and retrieve\na code, and a terminal window for your cURL commands. Note: In step 1 the\nclient_id is NOT the Application ID. It IS the Application Key."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step 1. GET a code using your browser - CAUTION: You MUST set the scope parameter.")),(0,r.kt)("p",null,"Put the GET request in your browser's address field. Craft a URL in the\nfollowing format:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"https://<LearnHost\n  >//learn/api/public/v1/oauth2/authorizationcode?redirect_uri=<REST APP URI>\n    & response_type=code & client_id=<your **app key**>\n      & scope=read</your\n    ></REST\n  ></LearnHost\n>\n")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("p",null,"Place the URI below in your browser address field:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"https://bd-partner-a-original.blackboard.com/learn/api/public/v1/oauth2/authorizationcode?\nredirect_uri=https://localhost & response_type=code &\nclient_id=d128e50d-c91e-47d3-a97e-9d0c8a77fb5d & scope=read\n")),(0,r.kt)("p",null,"At this point you are requested to log in."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"As of 2018.04.19 there is a bug\nwith the cookie-acceptance pop up that will require you to accept the pop-up\nand do the above a second time. Once your browser has the cookie-acceptance\ncookie set for a given Learn system the work flow will carry on as follows.")),(0,r.kt)("p",null,"For this example, after you log in your browser will be directed to:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"https://localhost/?code=XYTdmQcSGrggzujJm2Ccf8C7dKyqKc7Q")),(0,r.kt)("p",null,"(The code will be different every time.) If you provided some other host name in the redirect_uri, then that host name would be shown instead of localhost. Now you have the code that you will use to retrieve the access token for all\nadditional REST calls."),(0,r.kt)("p",null,'NOTE regarding scope: The developer portal shows an example scope parameter as\n"read write offline". Using curl this would be ',(0,r.kt)("inlineCode",{parentName:"p"}," & scope=read_write-offline")),(0,r.kt)("p",null,"We have to URL encode the space character."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step 2. POST to get the OAuth2 Access Token")),(0,r.kt)("p",null,"You will use your application's key and secret, and the access code from step"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Notice that the grant_type is authorization_code in this case. Also note\nthat the redirect_uri value MUST match the value provided in Step 1. For our\nExample we will use ",(0,r.kt)("inlineCode",{parentName:"li"},"https://localhost"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k --user <key>:<secret> --data "grant_type=authorization_code"\nhttps://<LearnHost>/learn/api/public/v1/oauth2/token\n')),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k --user d128e50d-c91e-47d3-a97e-9d0c8a77fb5d:kLpiuq34320jqreaiJIRoareASELERREv56\n--data "grant_type=authorization_code"\nhttps://bd-partner-a-original-new.blackboard.com/learn/api/public/v1/oauth2/token? code=ItmqfxQiA9dzIDNwNoNYseM5GNRHHlfa & redirect_uri=https://localhost\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "Cdf83I0dwRoweXuY1dZDbbW0f0WmDmuF",\n  "token_type": "bearer",\n  "expires_in": 3599,\n  "scope": "read",\n  "user_id": "7ac650e5bd0d467882943ed06fbfe72c"\n}\n')),(0,r.kt)("p",null,"The JSON response is serialized into the Token object as shown above, and you\nmay then retrieve those values from that object by using copy and paste. You\nwill use the value given for the access_token when calling the services as\nshown in the ",(0,r.kt)("a",{parentName:"p",href:"#calling-services"},(0,r.kt)("strong",{parentName:"a"},"Calling Services"))," section."),(0,r.kt)("h3",{id:"calling-services"},"Calling Services"),(0,r.kt)("p",null,"The individual service calls are handled in succession here. We'll use copy\nand paste to create the JSON object in the form of a string, use cURL for\ngenerating the appropriate HTTP Request, and shipping it to Learn. We'll see\nthe JSON response come back to stdout on the console."),(0,r.kt)("p",null,"End points are generally defined as ",(0,r.kt)("inlineCode",{parentName:"p"},"/learn/api/public/v1/<object type>/<objectId>"),". Object ID can be either the pk1, like ",(0,r.kt)("inlineCode",{parentName:"p"},"_1_1"),", or as the\nbatchuid. This value should be prepended by externalId:, like\n",(0,r.kt)("inlineCode",{parentName:"p"},"externalId:test101"),"."),(0,r.kt)("p",null,"For example, to retrieve a course by the pk1 ",(0,r.kt)("inlineCode",{parentName:"p"},"_1_1"),", you would call ",(0,r.kt)("strong",{parentName:"p"},"GET\n/learn/api/public/v1/courses/","_","1_1"),". To retrieve by the batchuid ",(0,r.kt)("inlineCode",{parentName:"p"},"test101"),", you\nwould call ",(0,r.kt)("strong",{parentName:"p"},"GET /learn/api/public/v1/courses/externalId:test101.")),(0,r.kt)("p",null,"Create is sent to Learn as a HTTP POST message with a JSON body that defines\nthe object. The endpoint should omit the objectId, as this will be generated\non creation."),(0,r.kt)("p",null,"Read is sent to Learn as a HTTP GET message with an empty body. The endpoint\nshould include the objectId being retrieved."),(0,r.kt)("p",null,"Update is sent to Learn as a HTTP PATCH message with a JSON body that defines\nthe object. The endpoint should include the objectId being updated."),(0,r.kt)("p",null,"Delete is sent to Learn as a HTTP DELETE message with empty body. The endpoint\nshould include the objectId being deleted."),(0,r.kt)("p",null,"Every example is shown in bold face, the JSON result is shown in italics."),(0,r.kt)("h3",{id:"datasources"},"DATASOURCES"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Create")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X POST -H "Authorization: Bearer <Access Token>" -H "Content-Type: application/json"\n--data \'{"externalId":"<String>", "description":"<String>"}\'\nhttps://<LearnHost>/learn/api/public/v1/dataSources\n')),(0,r.kt)("p",null,"Bearer will be the access_token value we got from the oauth2/token call above."),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X POST -H "Authorization: Bearer ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz" -H\n"Content-Type: application/json" --data \'{"externalId":"CURLDSK", "description":"cURL Demo DSK"}\'\nhttps://localhost:9877/learn/api/public/v1/dataSources\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{ "id": "_5_1", "externalId": "CURLDSK", "description": "cURL Demo DSK" }\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Read")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X GET -H "Authorization: Bearer <Access Token>"\nhttps://<LearnHost>/learn/api/public/v1/dataSources/externalId:<externalId from create>\n')),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X GET -H "Authorization: Bearer ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz"\nhttps://localhost:9877/learn/api/public/v1/dataSources/externalId:CURLDSK\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{ "id": "_7_1", "externalId": "CURLDSK", "description": "cURL Demo DSK" }\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Update")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k --request PATCH -H "Authorization: Bearer <Access Token>" -H\n"Content-Type: application/json" --data \'{"externalId":"<String>", "description":"<String>"}\'\nhttps://<LearnHost>/learn/api/public/v1/dataSources/[<primary id>|externalId:<String>]\n')),(0,r.kt)("p",null,"Examples:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k --request PATCH -H "Authorization: Bearer ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz" -H\n"Content-Type: application/json" --data \'{"externalId":"CURLDSK", "description":"cURL DEMONSTRATION DSK"}\'\n https://localhost:9877/learn/api/public/v1/dataSources/_7_1\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "_7_1",\n  "externalId": "CURLDSK",\n  "description": "cURL DEMONSTRATION DSK"\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k --request PATCH -H "Authorization: Bearer ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz" -H\n"Content-Type: application/json" --data \'{"externalId":"CURLDSK", "description":"cURL REST DEMO DSK"}\'\n https://localhost:9877/learn/api/public/v1/dataSources/externalId:CURLDSK\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{ "id": "_7_1", "externalId": "CURLDSK", "description": "cURL REST DEMO DSK" }\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Delete (If you are going to run the following examples, do so now before deleting your demo DSK.)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X DELETE -H "Authorization: Bearer <Access Token>"\nhttps://<LearnHost>/learn/api/public/v1/dataSources/[<primary id>|externalId:<String>]\n')),(0,r.kt)("p",null,"Examples:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X DELETE -H "Authorization: Bearer ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz"\nhttps://localhost:9877/learn/api/public/v1/dataSources/externalId:CURLDSK\n')),(0,r.kt)("p",null,"With delete, you don't see anything back on the command line to indicate your\ndelete was successful. You can run it again and you'll see that the DSK is\ntruly gone."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X DELETE -H "Authorization: Bearer ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz"\nhttps://localhost:9877/learn/api/public/v1/dataSources/externalId:CURLDSK\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{"status":404, "message":"Could not find object with ID:\nexternalId:CURLDSK", "extraInfo":"416d7b944a58482aaed2df50f301861b"}\n')),(0,r.kt)("h3",{id:"users"},"USERS"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Create")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X POST -H "Authorization: Bearer <Authorization Token>" -H\n"Content-Type: application/json" --data \'<JSON to create a User>\'\nhttps://localhost:9877/learn/api/public/v1/users\n')),(0,r.kt)("p",null,"Remember, you can always find the JSON specification for these calls at\n",(0,r.kt)("a",{parentName:"p",href:"https://developer.anthology.com/portal/displayApi"},"Explore APIs")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X POST -H "Authorization: Bearer ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz" -H\n"Content-Type: application/json" --data \'{"externalId":"restdemouser", "dataSourceId":"_7_1"\n, "userName":"restdemouser", "password":"xyzzy", "availability":{"available":"Yes"},\n"name":{"given":"demo", "family":"user", "title":"Mr"}, "contact":\n{"email":"no.one@ereh.won"}}\' https://localhost:9877/learn/api/public/v1/users\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "_7_1",\n  "uuid": "de2198a86c6645cbafaab13e79529e05",\n  "externalId": "restdemouser",\n  "dataSourceId": "_7_1",\n  "userName": "restdemouser",\n  "educationLevel": "Unknown",\n  "gender": "Unknown",\n  "created": "2016-05-11T21:39:11.518Z",\n  "systemRoleIds": ["User"],\n  "availability": { "available": "Yes" },\n  "name": { "given": "demo", "family": "user", "title": "Mr" },\n  "job": {},\n  "contact": { "email": "no.one@ereh.won" },\n  "address": {},\n  "locale": {}\n}\n')),(0,r.kt)("p",null,"By sheer coincidence this user's ID, '","_","7_1', came out to be the same as the DSK\nID, '","_","7_1'."),(0,r.kt)("p",null,"Note the availability of query parameters in the ",(0,r.kt)("a",{parentName:"p",href:"https://developer.anthology.com/portal/displayApi"},"REST Documentation")),(0,r.kt)("p",null,"Examples:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X GET -H "Authorization: Bearer bsdcojzT9i4qTaNE0T8ugEBcXE2U8jtu"\nhttps://bd-partner-a-ultra.blackboard.com/learn/api/public/v1/users?dataSourceId=_2_1\n & fields=externalId,userName,studentId\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{"results":[{"externalId":"[abcd001@examity.com](mailto:abcd001@examity.com)",\n"userName":"[abcd001@examity.com](mailto:abcd001@examity.com)", "studentId":"ABCD001"},\n{"externalId":"[abcd002@examity.com](mailto:abcd002@examity.com)", "userName":"[abcd002@examity.com]\n(mailto:abcd002@examity.com)", "studentId":"[ABCD002@examity.com](mailto:ABCD002@examity.com)"},...\n')),(0,r.kt)("p",null,"On a Windows system, use ^ to escape the & ."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X GET -H "Authorization: Bearer bsdcojzT9i4qTaNE0T8ugEBcXE2U8jtu"\nhttps://bd-partner-a-ultra.blackboard.com/learn/api/public/v1/users?\ndataSourceId=_220_1^ & fields=externalId,userName,studentId\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Read")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X GET -H "Authorization: Bearer <Authorization Token>"\nhttps://localhost:9877/learn/api/public/v1/users/[<primary id>|externalId:<String>]\n')),(0,r.kt)("p",null,"Examples:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X GET -H "Authorization: Bearer ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz"\nhttps://localhost:9877/learn/api/public/v1/users/externalId:restdemouser\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "_7_1",\n  "uuid": "de2198a86c6645cbafaab13e79529e05",\n  "externalId": "restdemouser",\n  "dataSourceId": "_7_1",\n  "userName": "restdemouser",\n  "educationLevel": "Unknown",\n  "gender": "Unknown",\n  "created": "2016-05-11T21:39:11.518Z",\n  "systemRoleIds": ["User"],\n  "availability": { "available": "Yes" },\n  "name": { "given": "demo", "family": "user", "title": "Mr" },\n  "job": {},\n  "contact": { "email": "no.one@ereh.won" },\n  "address": {},\n  "locale": {}\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X GET -H "Authorization: Bearer ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz"\nhttps://localhost:9877/learn/api/public/v1/users/_7_1\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "_7_1",\n  "uuid": "de2198a86c6645cbafaab13e79529e05",\n  "externalId": "restdemouser",\n  "dataSourceId": "_7_1",\n  "userName": "restdemouser",\n  "educationLevel": "Unknown",\n  "gender": "Unknown",\n  "created": "2016-05-11T21:39:11.518Z",\n  "systemRoleIds": ["User"],\n  "availability": { "available": "Yes" },\n  "name": { "given": "demo", "family": "user", "title": "Mr" },\n  "job": {},\n  "contact": { "email": "no.one@ereh.won" },\n  "address": {},\n  "locale": {}\n}\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Update")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k --request PATCH -H "Authorization: Bearer <Access Token>" -H "Content-Type: application/json"\n--data \'<JSON Data for a User>\' https://<LearnHost>/learn/api/public/v1/users/\n[<primary id>|externalId:<String>]\n')),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k --request PATCH -H "Authorization: Bearer ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz" -H\n"Content-Type: application/json" --data \'{"externalId":"restdemouser", "dataSourceId":"_7_1",\n"userName":"restdemouser", "availability":{"available":"Yes"}, "name":{"given":"Jane",\n"family":"Demo", "title":"Ms"}, "contact":{"email":"no.one@ereh.won"}}\'\n https://localhost:9877/learn/api/public/v1/users/_7_1\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "_7_1",\n  "uuid": "de2198a86c6645cbafaab13e79529e05",\n  "externalId": "restdemouser",\n  "dataSourceId": "_7_1",\n  "userName": "restdemouser",\n  "educationLevel": "Unknown",\n  "gender": "Unknown",\n  "created": "2016-05-11T21:39:11.518Z",\n  "systemRoleIds": ["User"],\n  "availability": { "available": "Yes" },\n  "name": { "given": "Jane", "family": "Demo", "title": "Ms" },\n  "job": {},\n  "contact": { "email": "no.one@ereh.won" },\n  "address": {},\n  "locale": {}\n}\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Delete")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X DELETE -H "Authorization: Bearer <Access Token>"\nhttps://<LearnHost>/learn/api/public/v1/users/[<primary id>|externalId:<String>]\n')),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X DELETE -H "Authorization: Bearer ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz"\nhttps://localhost:9877/learn/api/public/v1/users/externalId:restdemouser\n')),(0,r.kt)("p",null,"As with the DSK delete there is no output to the console when the delete is\nsuccessful. But, you can see that the user is gone by running the delete\nagain:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X DELETE -H "Authorization: Bearer ti3EVMVQO4RqdAgcpmODZdvjvHuuBHDz"\nhttps://localhost:9877/learn/api/public/v1/users/externalId:restdemouser\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'_{"status":404, "message":"Could not find object with ID:\nexternalId:restdemouser", "extraInfo":"e709f6982af744dfae18d42f68e73fb1"}_\n')),(0,r.kt)("h3",{id:"course-grades"},"COURSE GRADES"),(0,r.kt)("p",null,"(Only in SaaS)"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Create Grade Column")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X POST -H "Authorization: Bearer <Authorization Token>" -H "Content-Type: application/json" --data \'<JSON to create a Grade Column>\' [https://saashost.blackboard.com/learn/api/public/v1/courses/{courseId}/gradebook/columns\n')),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X POST -H "Authorization: Bearer uFMWyuwgItXL0UzMo6AHG0zOhm0yvfys" -H "Content-Type: application/json" --data \'{"id": "7", "externalId": "co7extId", "name": "co7name", "description": "co7desc", "externalGrade": true, "created":"2016-06-30T05:34:56.497Z", "score": {"possible": 77, "decimalPlaces":0}, "availability": {"available": "Yes"}, "grading": {"type":"Manual", "due": "2016-07-01T05:34:56.498Z", "attemptsAllowed":0, "scoringModel": "Last", "anonymousGrading": { "type": "None", "releaseAfter":"2016-07-11T05:34:56.498Z"}}}\' https://partner-smoke-test-a.blackboard.com/learn/api/public/v1/courses/_50_1/gradebook/columns\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{"id":"**_129_1**", "externalId":"co7extId", "name":"co7name", "description":"co7\ndesc", "externalGrade":true, "created":"2016-07-01T05:45:37.730Z", "score":{"poss\nible":77.0, "decimalPlaces":0}, "availability":{"available":"Yes"}, "grading":{"t\nype":"Manual", "due":"2016-07-01T05:34:56.498Z"}}\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Add/Update Column Grade")),(0,r.kt)("p",null,"(PATCH will create a grade where there isn't one.)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k --request PATCH -H "Authorization: Bearer <Access Token>" -H "Content-Type: application/json" --data \'<JSON Data for a Column Grade>\' https://<Learn Host>/learn/api/public/v1/courses/{courseId}/gradebook/columns/{columnId}/users/{userId}\n')),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k --request PATCH -H "Authorization: Bearer uFMWyuwgItXL0UzMo6AHG0zOhm0yvfys" -H "Content-Type: application/json" --data \'{"text": "A", "score": 77, "notes": "Great", "feedback": "GoodWork!", "exempt":true}\' https://partner-smoke-test-a.blackboard.com/learn/api/public/v1/courses/_50_1/gradebook/\ncolumns/_129_1/users/_66_1\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "userId": "_66_1",\n  "columnId": "_129_1",\n  "status": "Graded",\n  "score": 77.0,\n  "notes": "Great",\n  "feedback": "GoodWork!",\n  "exempt": true\n}\n')),(0,r.kt)("h3",{id:"access-content"},"ACCESS CONTENT"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"See ",(0,r.kt)("a",{parentName:"li",href:"/docs/rest-apis/learn/examples/curl-attach-demo"},"Access Content Attachments"))),(0,r.kt)("h3",{id:"course-copy"},"COURSE COPY"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X POST -H "Authorization: Bearer <Authorization Token>" -H "Content-Type: application/json" --data \'<JSON for the course to copy into>\' https://saashost.blackboard.com/learn/api/public/v1/courses/{courseId}/copy\n')),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X POST -H "Authorization: Bearer RcHoSkh8EH9UKo6iCHWXDpCKrmCyOIwr" -H "Content-Type: application/json" --data \'{"courseId":"mbk-test-copied201910111502"}\' https://partner-smoke-test-a.blackboard.com/learn/api/public/v1/courses/courseId:mbk-test/copy\n')),(0,r.kt)("p",null,"A new course with courseId: mbk-test-copied201910111502 is created. The contents of mbk-test are copied into it."),(0,r.kt)("p",null,"NOTE: You can NOT copy contents into an already existing course. For example\nwe used the GUI to create a course with a courseId: mbk-test-\ncopied201910111508. Then we attempted to run the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X POST -H "Authorization: Bearer RcHoSkh8EH9UKo6iCHWXDpCKrmCyOIwr" -H "Content-Type: application/json" --data \'{"courseId":"mbk-test-copied201910111508"}\' https://partner-smoke-test-a.blackboard.com/learn/api/public/\nv1/courses/_863_1/copy\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "status": 409,\n  "message": "A course with the provided courseId already exists"\n}\n')),(0,r.kt)("p",null,"You can only use the copy endpoint to take an existing course and create and\ncopy into a new, never before created, course."),(0,r.kt)("h3",{id:"add-content"},"ADD CONTENT"),(0,r.kt)("p",null,"(Remember to Check Availability of the APIs in the Learn Version)"),(0,r.kt)("p",null,"Preconditions - You know the courseId, you've gotten an access token, and you\nhave a local file to upload."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Get a course's contents.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X GET -H "Authorization: Bearer TwniVbrjLoQnNVWexAGBgQEyMaw7GT0P" https://bd-partner-a-original.blackboard.com/learn/api/public/v1/courses/\ncourseId:mbk-rest-contents/contents\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "results": [\n    {\n      "id": "_12906_1",\n      "title": "Information",\n      "created": "2017-12-06T18:50:24.625Z",\n      "position": 1,\n      "hasChildren": true,\n      "availability": {\n        "available": "Yes",\n        "allowGuests": true,\n        "adaptiveRelease": {}\n      },\n      "contentHandler": { "id": "resource/x-bb-folder" }\n    },\n    {\n      "id": "**_12907_1**",\n      "title": "Content",\n      "created": "2017-12-06T18:50:24.628Z",\n      "position": 2,\n      "hasChildren": true,\n      "availability": {\n        "available": "Yes",\n        "allowGuests": true,\n        "adaptiveRelease": {}\n      },\n      "contentHandler": { "id": "resource/x-bb-folder" }\n    }\n  ]\n}\n')),(0,r.kt)("p",null,"In the THIRD step we\u2019ll place our file in the Content folder we see in the\nabove response. Every new Learn Original course has a Content folder by\ndefault."),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Upload a file.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST -H "Authorization: Bearer TwniVbrjLoQnNVWexAGBgQEyMaw7GT0P" https://bd-partner-a-original.blackboard.com/learn/api/public/v1/uploads -F "file=@/Users/mbk/Documents/2016.09.BlackboardPartnerUpdate.pdf"\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{ "id": "4B6281344DFDD9B1F36A5719BDB10708-38295ef0c6a74954a1055e1045bcfeeb" }\n')),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Create the content item using bbXML and the id from the prior step.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "title": "Sept 2016 Partner Update",\n  "contentHandler": {\n    "id": \u201cresource/x-bb-file",\n    "file": {\n      "uploadId":"4B6281344DFDD9B1F36A5719BDB10708-38295ef0c6a74954a1055e1045bcfeeb",\n      "fileName": "2016.09.BlackboardPartnerUpdate.pdf",\n      "duplicateFileHandling": "Rename"\n    }\n  }\n}\n')),(0,r.kt)("p",null,"Then call the appropriate endpoint:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X POST -H "Authorization: Bearer TwniVbrjLoQnNVWexAGBgQEyMaw7GT0P" -H "Content-Type: application/json" --data \'{"title": "Sept 2016 Partner Update", "contentHandler": {"id": "resource/x-bb-file", "file": {"uploadId": "4B6281344DFDD9B1F36A5719BDB10708-38295ef0c6a74954a1055e1045bcfeeb", "fileName":"2016.09.BlackboardPartnerUpdate.pdf", "duplicateFileHandling": "Rename"}}}\' https://bd-partner-a-original.blackboard.com/learn/api/public/v1/courses/\ncourseId:mbk-rest-contents/contents/_12907_1/children\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "_12908_1",\n  "parentId": "_12907_1",\n  "title": "Sept 2016 Partner Update",\n  "created": "2017-12-06T19:22:59.536Z",\n  "position": 0,\n  "availability": {\n    "available": "Yes",\n    "allowGuests": true,\n    "adaptiveRelease": {}\n  },\n  "contentHandler": {\n    "id": "resource/x-bb-file",\n    "file": { "fileName": "2016.09.BlackboardPartnerUpdate.pdf" }\n  }\n}\n')),(0,r.kt)("p",null,"You can, of course, use the id returned in the above to fetch the content item\nusing the appropriate GET. Read the documentation at developer.anthology.com."),(0,r.kt)("h3",{id:"create-assignment-with-attachment"},"CREATE ASSIGNMENT WITH ATTACHMENT"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Currently Only Available For Ultra Courses (Remember to check the Learn version for availably of the APIs @ ",(0,r.kt)("a",{parentName:"strong",href:"https://developer.anthology.com"},"https://developer.anthology.com"),")")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Get a course's content root. root will only work with the ","_","abc_xyz ID\nformat. It will not work for courseId:<course_id> format.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X GET -H "Authorization: Bearer <Access Token> " https://<LearnHost>/learn/api/public/v1/courses/<ID>/contents/root\n')),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X GET -H "Authorization: Bearer N75W0ceKowxtlMUZtuIqwwvPQtxvx3L5" https://bd-partner-a-ultra.blackboard.com/learn/api/public/v1/courses/_691_1/contents/root\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "_5108_1",\n  "title": "ROOT",\n  "created": "2018-04-08T15:57:34.188Z",\n  "position": 0,\n  "hasChildren": true,\n  "availability": {\n    "available": "Yes",\n    "allowGuests": false,\n    "adaptiveRelease": {}\n  },\n  "contentHandler": { "id": "resource/x-bb-folder" }\n}\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Upload the file to be attached to the assignment.")),(0,r.kt)("p",null,"Note: The file is uploaded to temporary storage so we must attach it to an\nassignment shortly after the upload"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST -H "Authorization: Bearer N75W0ceKowxtlMUZtuIqwwvPQtxvx3L5" https://bd-partner-a-ultra.blackboard.com/learn/api/public/v1/uploads -F "file=@/Users/mbk/Documents/2016.06.BlackboardPartnerUpdate.pdf"\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{ "id": "D1-D1165F42C7E11286BDAFDCCD2E2BE935-56c7b14aa4cb499b9a9a2a8cc3156290" }\n')),(0,r.kt)("p",null,"We use this id to indicate the file that is to be attached to the assignment."),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Create the assignment with the file attached:")),(0,r.kt)("p",null,"(The file must be attached soon after being uploaded as it is uploaded to a\ntemporary location and goes away sometime after being uploaded. Also, there is\na bug in the following where if attempts allowed is too large it will fail.\nI've not experimented to find the limit.)"),(0,r.kt)("p",null,"Reference: ",(0,r.kt)("a",{parentName:"p",href:"https://developer.anthology.com/portal/displayApi"},"POST /learn/api/public/v1/courses/{courseId}/contents/createAssignment")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X POST -H "Authorization: Bearer N75W0ceKowxtlMUZtuIqwwvPQtxvx3L5" -H "Content-Type: application/json" --data \'{"parentId": "_5108_1", "title":"Assignment Created by REST createAssignment", "instructions": "Simple Instructions", "description": "Assignment with Attachment", "position": 0, "fileUploadIds":["D1-D1165F42C7E11286BDAFDCCD2E2BE935-56c7b14aa4cb499b9a9a2a8cc3156290"], "availability": {"available": "Yes", "allowGuests": true, "adaptiveRelease": { "start": "2018-04-05T18:35:20.050Z", "end": "2018-09-02T18:35:20.050Z" } }, "grading": { "due": "2018-09-02T18:35:20.050Z", "attemptsAllowed": 10 }, "score": { "possible": 100 } }\' https://bd-partner-a-ultra.blackboard.com/learn/api/public/v1/courses/\ncourseId:mbk-ultra-course/contents/createAssignment\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "contentId": "_6282_1",\n  "gradeColumnId": "_3297_1",\n  "assessmentId": "_11701_1",\n  "questionIds": ["_11703_1", "_11704_1"]\n}\n')),(0,r.kt)("p",null,"We will use the gradeColumnId when submitting a student attempt to the\nassignment."),(0,r.kt)("h3",{id:"submit-assignment-attempt-with-attachment"},"SUBMIT ASSIGNMENT ATTEMPT WITH ATTACHMENT"),(0,r.kt)("p",null,"Currently Only Available For Presentation-Only Assignments"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"(Reference for all APIs used and the Learn version they are available in is @ ",(0,r.kt)("a",{parentName:"strong",href:"https://developer.anthology.com"},"https://developer.anthology.com"),")")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Use 3LO to get an access code for the student account that will submit\nthe attempt to the assignment. 3LO MUST be used for this process.")),(0,r.kt)("p",null,"NOTES:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Use Status read write, write is required to POST the assignment.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"LOG OUT of any browser session with the Learn system you've been working with\nbefore doing the next step where you will log in with the student account."),(0,r.kt)("p",{parentName:"li"},"a. Put the following URL in a browser's address field. Use the FQDN of the\nLearn system you are working with. The client_id is the REST Application Key.\n(Not the ID.)"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},"https://bd-partner-a-ultra.blackboard.com/learn/api/public/v1/oauth2/authorizationcode? redirect_uri=https://localhost & response_type=code & client_id=d128e50d-c91e-47d3-a97e-9d0c8a77fb5d & scope=read write & state=xyzzy\n")),(0,r.kt)("p",null,"Your browser should take you to the Learn login page. If you see the dialog to\naccept cookies, accept the dialog. Then repeat a. There is a bug that won't\ntake you past b. if you've not previously accepted the cookie disclosure\ndialog."),(0,r.kt)("p",null,"b. Log in with the student account that will be submitting the assignment\nattempt. Accept any dialog that pops up."),(0,r.kt)("p",null,"Your browser's address field will be redirected to a URL like the following.\nYou SHOULD see something about being unreachable in the browser. That's OK."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},"https://localhost/?code=g84Xx0YaEz1iqS6HFRq0X9MdRTnQ48FT & state=xyzzy\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Our code is: g84Xx0YaEz1iqS6HFRq0X9MdRTnQ48FT This is the code we use in the next step to get an access token.")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Use the 2nd-leg of 3LO to get an access token - POST using the code,\nour application key, and secret to the oauth2/token endpoint.")),(0,r.kt)("p",null,"Note: the redirect_uri must match the redirect_uri we used when we got the\ncode."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k --user d128e50d-c91e-47d3-a97e-9d0c8a77fb5d:sorryyoucanthavemysecret --data "grant_type=authorization_code" https://bd-partner-a-ultra.blackboard.com/learn/api/public/v1/oauth2/token? code=g84Xx0YaEz1iqS6HFRq0X9MdRTnQ48FT & redirect_uri=https://localhost\n')),(0,r.kt)("p",null,"We get an access token back to use for submitting the students assignment\nattempt."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "4mgoFlQoi4Jq4biKpU4R264wugsKF9R1",\n  "token_type": "bearer",\n  "expires_in": 3599,\n  "scope": "read write",\n  "user_id": "507ba08376e1498cba8c6cd35b003aa2"\n}\n')),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Upload the file to be attached to the attempt into temporary storage.\nIt's temporary and needs to be used quickly")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST -H "Authorization: Bearer 4mgoFlQoi4Jq4biKpU4R264wugsKF9R1" https://bd-partner-a-ultra.blackboard.com/learn/api/public/v1/uploads -F "[file=@/Users/mbk/Documents/2016.03.BlackboardPartnerUpdate.pdf]"\n')),(0,r.kt)("p",null,"We get back an ID that we use to attach the file to the attempt."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{ "id": "BD-BD9C08679892561211D99DB4C817FE68-67545ce854b54d3fb062e38aefeee47c" }\n')),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},'Submit the attempt. We\'re using the gradeColumnId":"',"_",'3297_1" that\nwe got when we created the assignment.')),(0,r.kt)("p",null,'The "studentSubmision" is in bbML format. Reference: ',(0,r.kt)("a",{parentName:"p",href:"/docs/rest-apis/learn/advanced/bbml"},"Blackboard Markup\nLanguage - BbML")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X POST -H "Authorization: Bearer 4mgoFlQoi4Jq4biKpU4R264wugsKF9R1" -H "Content-Type: application/json" --data \'{"studentComments":"this is the student commment", "studentSubmission": "\x3c!-- {\\"bbMLEditorVersion\\":1} --\x3e <a href=\\"bbupload://BD-BD9C08679892561211D99DB4C817FE68-67545ce854b54d3fb062e38aefeee47c\\" data-bbfile=\\"{ & quot;render & quot;: & quot;inline & quot;, & quot;linkName & quot;: & quot;2016.03.BlackboardPartnerUpdate.pdf & quot;, & quot;mimeType & quot;: & quot;application/pdf & quot;}\\">2016.03.BlackboardPartnerUpdate.pdf<_/a>"}:_\' https://bd-partner-a-ultra.blackboard.com/learn/api/public/v2/courses/courseId:mbk-ultra-\ncourse/gradebook/columns/_3297_1/attempts\n')),(0,r.kt)("p",null,"We get back an attempt ID for an InProgress student submission. We use the\nattempt ID in the next step to set the attempt to needs grading so that the\ninstructor sees the attempt. Attempts that are InProgress are not available to\nthe instructor in the GUI."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "_528_1",\n  "userId": "_649_1",\n  "status": "InProgress",\n  "studentSubmission": "\x3c!-- {\\"bbMLEditorVersion\\":1} --\x3e\\n<a href=\\"https://bd-partner-a-ultra.blackboard.com/bbcswebdav/xid-23611_1\\" data-bbfile=\\"{ & quot;render & quot;: & quot;inline & quot;, & quot;linkName & quot;: & quot;2016.03.BlackboardPartnerUpdate.pdf & quot;, & quot;mimeType & quot;: & quot;application/pdf & quot;}\\">2016.03.BlackboardPartnerUpdate.pdf</a>",\n  "exempt": false,\n  "created": "2018-05-18T02:48:18.329Z"\n}\n')),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},'Set the attempt to "NeedsGrading"')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -k -X PATCH -H "Authorization: Bearer 4mgoFlQoi4Jq4biKpU4R264wugsKF9R1" -H "Content-Type: application/json" --data \'{"status":"NeedsGrading"}:\' https://bd-partner-a-ultra.blackboard.com/learn/api/public/v2/courses/courseId:mbk-ultra-\ncourse/gradebook/columns/_3297_1/attempts_528_1\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{"id":"528_1", "userId":"_649_1", "status":"NeedsGrading", "studentSubmission":"\x3c!-- {\\"bbMLEditorVersion\\":1} --\x3e\\n<a href=\\"[https://bd-partner-a-ultra.blackboard.com/bbcswebdav/xid-23611_1" data-bbfile=\\"{ & quot;render & quot;: & quot;inline & quot;, & quot;linkName & quot;: & quot;2016.03.BlackboardPartnerUpdate.pdf & quot;, & quot;mimeType & quot;: & quot;application/pdf & quot;}\\">2016.03.BlackboardPartnerUpdate.pdf</a>", "exempt":false, "created":"2018-05-18T02:48:18.329Z"}\n')),(0,r.kt)("p",null,"{: .code-text-to-normal}"),(0,r.kt)("p",null,"Now, logged in as the instructor, we can see that there has been 1 submission.\nAnd we see the student's submission with the attachment."),(0,r.kt)("h3",{id:"common-errors"},"Common Errors"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"COMMON ERROR: You used 3LO to get an Access Token. You forgot to set the\nscope correctly and are getting permission denied errors. 404 etc."),(0,r.kt)("li",{parentName:"ul"},"SOLUTION: Go back through the 3LO process and specify the scope necessary\nto make your REST calls.")),(0,r.kt)("h3",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"We hope that the above demonstration gives you a helpful peek under the hood\nas to what is going on when you make REST calls to a Learn system. You can\ntake these cURL commands and use them to make all of the REST calls documented\nhere: ",(0,r.kt)("a",{parentName:"p",href:"https://developer.anthology.com/portal/displayApi"},"Explore APIs"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You must ",(0,r.kt)("a",{parentName:"li",href:"/docs/developer-portal/start-here"},"register a developer account and application")," in the Developer Portal")),(0,r.kt)(d,{frontMatter:o,mdxType:"AuthorBox"}))}k.isMDXComponent=!0},8166:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/2016.06.22.RestTechnicalDeepDiveForPartners-2a170417ca0eb57047894948e6011b82.pptx"}}]);