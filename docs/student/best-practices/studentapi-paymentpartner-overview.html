<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-student/best-practices/studentapi-paymentpartner-overview" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Payment Partner Overview | Anthology Developer Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.anthology.com/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://docs.anthology.com/img/social-card.png"><meta data-rh="true" property="og:url" content="https://docs.anthology.com/docs/student/best-practices/studentapi-paymentpartner-overview"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Payment Partner Overview | Anthology Developer Docs"><meta data-rh="true" name="description" content="The Anthology Student API library has a number of APIs that are designed to support the most common use cases for facilitating an integration between a payment provider and the Anthology student application. The purpose of this document is to provided the details needed for a payment provider to build an integration with the Anthology Student product that supports the base use cases that are common for most payment providers. These common use cases will be discussed below providing details in how to implement utilizing the Anthology Student APIs. An additional section on authorization permissions that are required for executing the APIs will also be included."><meta data-rh="true" property="og:description" content="The Anthology Student API library has a number of APIs that are designed to support the most common use cases for facilitating an integration between a payment provider and the Anthology student application. The purpose of this document is to provided the details needed for a payment provider to build an integration with the Anthology Student product that supports the base use cases that are common for most payment providers. These common use cases will be discussed below providing details in how to implement utilizing the Anthology Student APIs. An additional section on authorization permissions that are required for executing the APIs will also be included."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.anthology.com/docs/student/best-practices/studentapi-paymentpartner-overview"><link data-rh="true" rel="alternate" href="https://docs.anthology.com/docs/student/best-practices/studentapi-paymentpartner-overview" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.anthology.com/docs/student/best-practices/studentapi-paymentpartner-overview" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Anthology Developer Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Anthology Developer Docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.61dee474.css">
<link rel="preload" href="/assets/js/runtime~main.14fca754.js" as="script">
<link rel="preload" href="/assets/js/main.f05dfd13.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/anthology-logo-light.svg" alt="Anthology Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/anthology-logo-dark.svg" alt="Anthology Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/contributions">Contributions</a><div class="navbar__item"><a class="navbar-gh-link" href="https://github.com/blackboard/anthologydevdocs" target="_blank"><img class="navbar-gh-img-link" src="/img/github-logo.png"></a></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/developer-portal/start-here">Developer Portal</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/blackboard/welcome">Blackboard Learn</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/student/getting-started/first-steps">Student</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/student/getting-started/first-steps">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/student/best-practices/studentapi-paymentpartner-overview">Best Practices</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/student/best-practices/studentapi-paymentpartner-overview">Payment Partner Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/student/best-practices/studentapi-postunscheduledpayment-details">Post Unscheduled Payments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/student/best-practices/studentapi-savestudenttransfercredit-details">Using the SaveStudentTransferCredit command API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/student/best-practices/get-save-bestpractices">Tips for using the Get and Save API operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/student/best-practices/create-savenew-bestpractices">Tips for using the Create and SaveNew API operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/student/best-practices/studentapi-querymodel-metadata">Student query model metadata</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/student/service-catalog/service-catalog">Service Catalog</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ally/getting-started">Ally</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/partners/partners-become_a_partner">Partners</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/community/community-intro">Community</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/maintenance-page">Service Maintenances and Releases</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Student</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Best Practices</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Payment Partner Overview</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Payment Partner Overview</h1><div class="tracker_container_Gxex"><p class="date_Xr9N">Published: <!-- -->Not Available</p><p class="date_Xr9N">Last Update:<!-- --> <!-- -->Not Available</p><p> </p></div></header><p>The Anthology Student API library has a number of APIs that are designed to support the most common use cases for facilitating an integration between a payment provider and the Anthology student application. The purpose of this document is to provided the details needed for a payment provider to build an integration with the Anthology Student product that supports the base use cases that are common for most payment providers. These common use cases will be discussed below providing details in how to implement utilizing the Anthology Student APIs. An additional section on authorization permissions that are required for executing the APIs will also be included.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-payment-vendor-use-cases">Common Payment vendor use cases<a href="#common-payment-vendor-use-cases" class="hash-link" aria-label="Direct link to Common Payment vendor use cases" title="Direct link to Common Payment vendor use cases">​</a></h2><p>Common integration use cases between a payment vendor and Anthology Student are:</p><ul><li>Post Payments</li><li>Post Charges and Adjustments</li><li>Apply posted payments</li><li>Process/post scheduled refunds</li><li>Create a payment plan</li><li>Update an existing payment plan</li><li>Post misc cash receipt transactions that are not associated to a student ledger card in the SIS.</li></ul><p>This section will outline the API endpoint(s) that can be used to satisfy each of these use cases. Additional details relevant to the execution logic for each API will be included.</p><p>To see additional details for the APIs within Student, access the Swagger output. This can be done while logged into the Student web application. Append &#x27;swagger&#x27; to the base URI used to launch the Student application. For purposes of this document, all of the APIs that will be referenced can be found in the Swagger output by using the Type filter. Choose &quot;Integration&quot; from this drop down and click Refresh. All of the APIs referenced in this document will be documented in the Student Accounting and Student Payment Plan sections.</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview1-c993baf05c1fbe0672fa4cbfb480592b.png" width="1509" height="656" class="img_ev3q"></p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview2-7946f49e7947ff9527c72bdcfa3df46b.png" width="1158" height="648" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="post-payment">Post Payment<a href="#post-payment" class="hash-link" aria-label="Direct link to Post Payment" title="Direct link to Post Payment">​</a></h3><p>The most basic use case for an integration between a payment provider and Anthology Student is to be able to process a payment within the payment vendor application and then post that payment to the student&#x27;s ledger card within Anthology Student. At a high level, there are two different kinds of payments within the Student application. The first is a payment that is not associated with expected funding and the second is a payment that is associated to an expected disbursement. One of the features in Student is the ability to package a student for Financial Aid which results in a list of scheduled disbursements being created. Included in this are Student payment plans. A student payment plan will have 1 or more expected payments/installments created as part of the payment plan data. When posting a payment that is made against a payment plan, the payment will be &quot;associated&quot; with the expected disbursement record. Regardless of whether the payment being posted is for an expected disbursement or is not associated to an expected disbursement, the same API endpoint will be used. There are properies in the request payload that inform the API execution logic as to if the payment being posted is associated to an expected disbursement record or is not associated to an expected disbursement record.</p><p>The API to use for posting payments is POST api/student-accounting/ledger-payment-transactions</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview3-6f63edc856f7be6049c8ab6a997e5332.png" width="1743" height="655" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="installment-on-payment-plan">Installment on Payment Plan<a href="#installment-on-payment-plan" class="hash-link" aria-label="Direct link to Installment on Payment Plan" title="Direct link to Installment on Payment Plan">​</a></h4><p>If a payment is being posted for an expected installment on a payment plan, then the request payload will include this information either by providing the Id of the expected installment record the payment is for (ScheduledDisbursementId property) or setting the UseNextScheduledPayment property to true. If this is not done in the request, then the API execution logic will assume that the payment being posted is NOT for an expected disbursement. If UseNextScheduledPayment property is true, then the payment being posted will be associated to the expected disbursement record for the payment plan that has a status of scheduled and the earliest expected payment date. If the amount of the payment being posted does not match the amount of the expected disbursement it is being associated to, then the expected payment schedule will be auto adjusted accordingly. If the amount of payment is less than the amount of the expected disbursement, then a new expected disbursement record with a status of scheduled will be created with an amount that is the difference between the amount that was expected and the payment amount. If the amount of the payment being posted is greater than the the amount of the expected payment it is being associated to, then the difference will be applied to the next expected payment. See examples below:</p><p>Expected payment schedule:</p><p>Payment # Expected Amount Expected Date Paid Amount Status
1 $100 04/01/2024 $0 Scheduled
2 $100 05/01/2024 $0 Scheduled
3 $100 06/01/2024 $0 Scheduled</p><p>Payment is posted and is associated to Expected payment # 1 above. Payment amount is $125. Payment schedule after API execution completes is as follows:</p><p>Payment # Expected Amount Expected Date Paid Amount Status
1 $100 04/01/2024 $100 Paid
2 $25 05/01/2024 $25 Paid
2 $75 05/01/2024 $0 Scheduled
3 $100 06/01/2024 $0 Scheduled</p><p>Payment is posted and is associated to Expected payment # 1 above. Payment amount is $75. Payment schedule after API execution completes is as follows:</p><p>Payment # Expected Amount Expected Date Paid Amount Status
1 $75 04/01/2024 $75 Paid
1 $25 04/01/2024 $0 Scheduled
2 $75 05/01/2024 $0 Scheduled
3 $100 06/01/2024 $0 Scheduled</p><p>The above auto adjust logic will execute as part of the post payment transaction unit of work. If the Payment vendor application creates and manages payment plans for students and is considered the system of record for payment plans, then the Payment Plan APIs will be utilized to push the payment plan data into Student. These APIs are designed to allow for data to be pushed into Student and replace the expected payment plan data that is auto adjusted per logic explained above keeping the payment plan data in Student synchronized with the payment plan data in the Payment provider data store.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cashiering">Cashiering<a href="#cashiering" class="hash-link" aria-label="Direct link to Cashiering" title="Direct link to Cashiering">​</a></h4><p>If the school is using the Cashiering feature in Anthology Student, then a couple of additional properties in the request payload will be required. The Cashiering feature is enabled by campus. To see if cashiering is enabled for a given campus, navigate to Settings - System - Campuses. Select the campus you want to check. Choose the Student Accounts tile. The setting will be on the General tab.</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview5-31fda24ba68647be8096761e4506d8e6.png" width="1920" height="1030" class="img_ev3q"></p><p>As a best practice, it is recommended that a cash drawer be created for exclusive use by the payment provider. After creating the cash drawer, create a cash drawer session and associate it to the user that the payment provider will be authenticating under. This user needs to be configured as a cashier user within the Staff configuration. Once the Cash Drawer is created then the Id of the Cash Drawer is the value that will be used for the CashDrawerId property in the post payment request payload. There is also the option to just create the Cash Drawer record without creating the cash drawer session. For this to work, a CashierUserId must also be specified when executing the post payment API. This Id would be the Id of the Staff user the API call is being authenticated under.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="post-charges-or-adjustments">Post Charges or Adjustments<a href="#post-charges-or-adjustments" class="hash-link" aria-label="Direct link to Post Charges or Adjustments" title="Direct link to Post Charges or Adjustments">​</a></h3><p>Another common use case is to be able to post charges and/or adjustments to a student&#x27;s ledger card. Many times a student will be making a payment for a fee that is charged via the Payment Vendor application. There also may be some instances where a credit adjustment will need to be posted to a student&#x27;s ledger card as well.</p><p>The API to use for posting charges and credit adustments is POST api/student-accounting/ledger-chargeoradjustment-transactions</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview4-c4dfa4ecd59ee32bcca375e7feb78e96.png" width="1819" height="806" class="img_ev3q"></p><p>The minimum required properties for this payload are StudentId, BillingTransactionCodeId, Type, TransactionAmount, TransactionDate and Description. Other properties are conditionally required dependent on Student configuration settings. For example, TermId may be required if the setting to require term when posting charges is set to true. Other time period based properties (StudentAcademcYearId, StudentAcademicYearPaymentPeriodId) may or may not need to be provided depending on the time frame(s) that the school bases revenue/refund calculations on. Clarifying if/how to populate these properties in the payload will likely need to be worked out on a case by case basis via collaboration with the institution being worked with.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apply-posted-payments">Apply Posted Payments<a href="#apply-posted-payments" class="hash-link" aria-label="Direct link to Apply Posted Payments" title="Direct link to Apply Posted Payments">​</a></h3><p>The apply payments endpoint is used when there is a need to explicitly specify which charge/adjustment transactions a given payment transaction will be applied to. Anthology has a feature that allows for payments to be automatically applied to charge and adjustment transactions using the auto apply configuration. If all of the institutions requrements for how payments should be applied to charges are satisfied via the configuration, then this endpoint is not needed. However, if there are cases, where the rules for how to apply payments are not fully covered via the auto payment apply configuration OR the setting to auto apply payments is turned off, then there may be a need to utilize this endpoint. If/how this endpoint is utilized will need to be clarified with the institution being worked with.</p><p>The API to use for applying payments is POST api/student-accounting/ledger-transactions-applypayments</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview6-8d9bf868f5c44e96603dc0724a642230.png" width="1920" height="1030" class="img_ev3q"></p><p>The request payload for this API is pretty straight forward. The payment or credit adjustment transaction you are applying is specified along with the charge/debit adjustment transaction ids you are applying the payment/credit adjustment transaction to. There is built in validation logic that will not allow you to apply an amount that is greater than the amount left to apply for a given charge/debit adjustment transaction.</p><p>IMPORTANT: If the institution has the setting to auto apply payments on, and a payment is applied using this API, a flag will be set on the payment and charge transactions specifying that manual applyment was done. This will prevent the applied transaction data from being overwritten by subsequent auto applyment processes that execute. The only way to edit this information will be via the manual apply page within the Student web client UI.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="process-and-post-scheduled-refunds">Process and Post Scheduled Refunds<a href="#process-and-post-scheduled-refunds" class="hash-link" aria-label="Direct link to Process and Post Scheduled Refunds" title="Direct link to Process and Post Scheduled Refunds">​</a></h3><p>Many Payment providers have a capability for processing refunds that are scheduled. The concept is similar to the payment plan installment payments discussed above. A refund is owed to a student, the refund is scheduled in the Student application and then that refund is paid on or before the refund due date. The high level flow of this use case for Payment providers who process refunds is as follows:</p><ul><li>Retrieve batch of refunds that are due to be paid and need to be processed</li><li>Flag the scheduled refund records that were retrieved indicating that these refunds have been selected for processing</li><li>Process the refunds in the Payment provider software</li><li>Post the refunds as processed back into the Student application</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="retrieve-scheduled-refunds">Retrieve scheduled refunds<a href="#retrieve-scheduled-refunds" class="hash-link" aria-label="Direct link to Retrieve scheduled refunds" title="Direct link to Retrieve scheduled refunds">​</a></h4><p>The first step is to retrieve the scheduled refunds that need to be processed. The best way to do this is to constuct an odata query to retrieve the needed information. The scheduled refunds will reside in the Refunds entity. One of the filters needed in the query will be on the Status property. A value of &#x27;N&#x27; in the Status property indicates that the refund is scheduled but has not yet been processed/paid. Other valid values for this property are P= Processed/Paid, V= Was paid but has since been Voided and S= Selected for Processing. The other key filters needed in the OData query will be on the DueDate property which indicates the date that the refund is due. Also, there will likely need to be filtering based on the fund source the refund is for. In many cases, refunds that are being returned to Title IV fund sources are not processed by Payment providers. The StudentAward navigation property on the Refunds entity will need to be utilized to construct the filtering condition needed to filter on the fund source(s) that should be included.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="flag-the-selected-refund-records">Flag the selected refund records<a href="#flag-the-selected-refund-records" class="hash-link" aria-label="Direct link to Flag the selected refund records" title="Direct link to Flag the selected refund records">​</a></h4><p>The next step after selecting the refunds to be processed is to utilize an API to mark these refunds as selected for processing. This is critical to ensure the refunds retrieved in the prior step are not eligible to be processed within the Student application and/or included in a subsequent query for retrieving refunds to be processed. There is an API that allows for manipulation of the Status property on the Refunds entity.</p><p>The API to use for setting the Status value on the Refund entity is PATCH api/student-accounting/scheduled-refunds-status</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview7-80ca60bc4798b5ada43d8014f3aa4325.png" width="1920" height="1030" class="img_ev3q"></p><p>This API is very easy to use. There are only two units of work that occur. Change the Status on the Refund entity row from N to S or change the Status on the Refund row from S to N. There may be some times where for whatever reason the processing of the refund in the Payment provider application was not successful. For these cases, where the refund is not able to be processed in the Payment provider software, the Status on that scheduled refund record will need to be changed from Selected for processing back to Not Processed.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="post-the-processedpaid-refunds">Post the Processed/Paid Refunds<a href="#post-the-processedpaid-refunds" class="hash-link" aria-label="Direct link to Post the Processed/Paid Refunds" title="Direct link to Post the Processed/Paid Refunds">​</a></h4><p>After the refunds have been processed in the Payment Provider application, these refunds need to be posted in Student utilizing an API.</p><p>The API to use for posting these scheduled refunds is POST api/student-accounting/ledger-scheduled-refund-transactions</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview8-087ae45b092abbf7df025a3836c3688b.png" width="1920" height="1030" class="img_ev3q"></p><p>It is important to note that there is another API that allows for posting refunds. However, this API is used when posting a refund to a student&#x27;s ledger card that is NOT scheduled. If there is a need to post a refund that is not scheduled and has no row in the Refunds entity then use the POST api/student-accounting/ledger-refund-transactions endpoint.</p><p>The request payload for posting scheduled refunds is a collection allowing for all refunds that have been processed in the Payment provider application to be posted via a single API call. The key property that must be specified in the request for each refund posted is the RefundId value which identifies the row in the Refund entity that has been paid/posted. The high level unit of work that will occur within the execution of this API will be to post a refund transaction on the student&#x27;s ledger card AND also update the Status on the Refund entity row from Selected for processing to P= Processed/Paid.</p><p>The response returned will be a collection having one element for each element that was provided in the request. The success/failure for each individual refund record provided in the request will be articulated in the response.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-payment-plan">Create a payment plan<a href="#create-a-payment-plan" class="hash-link" aria-label="Direct link to Create a payment plan" title="Direct link to Create a payment plan">​</a></h3><p>Another common use case for Payment providers is to create and manage payment plans for Students. If the payment plan data is persisted in the Payment provider data store, then the Payment Provider application will be considered the system of record for student payment plan data. Because there are numerous reports and other processes in Student that have a dependency on ALL expected funding to be represented for a student, it is imperative that the payment plan data stored in Anthology Student is kept in synch with the payment plan data in the Payment Provider software. The create payment plan and update existing payment plan APIs will be used for this purpose.</p><p>The API to use for creating a new payment plan in Anthology Student is POST api/student-accounting/student-payment-plan</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview9-2e55ae185c4344270a38d33606877661.png" width="1920" height="1030" class="img_ev3q"></p><p>Payment Plans can be interest bearing or non-interest bearing plans in Anthology Student. Several properties in the request payload can be ignored for non-interest bearing payment plans. The request payload needed should be able to be created fairly easily by using the property level documentation found in the swagger output.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-an-existing-payment-plan">Update an existing payment plan<a href="#update-an-existing-payment-plan" class="hash-link" aria-label="Direct link to Update an existing payment plan" title="Direct link to Update an existing payment plan">​</a></h3><p>This API will be used to ensure existing payment plans are kept in sync between the Payment provider application and Anthology Student. A very common use case is when a student makes an installment payment but the amount of the payment does not match the amount of the expected installment. In these cases, the remainder of the expected payment schedule needs to be adjusted. Assuming the Payment Provider application is the system of record, this adjustment would occur in the Payment provider application. The resulting data would then be pushed into Anthology Student using the API to update an existing payment plan.</p><p>The API to use for updating an existing payment plan in Anthology Student is PATCH api/student-accounting/student-payment-plan</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview10-6206996af3fc7e25d46ed2da0e0c0c63.png" width="1920" height="1030" class="img_ev3q"></p><p>One of the key capabilities with this API is to be able to remove ALL expected payments for a payment plan and replace them with the scheduled payments that are specified in the request. The IsScheduledPaymentsRemoved property in the request is used for this purpose. It is important to note that ONLY rows with a Status of S or C in the payment plan expected payments entity (ScheduledDisbursements) can be removed. Any expected disbursement record that has been marked as Paid will not be touched. The request payload has property level documentation and should be reviewed carefully as a guide for constructing the desired request payload for this API.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="post-misc-cash-receipts">Post misc cash receipts<a href="#post-misc-cash-receipts" class="hash-link" aria-label="Direct link to Post misc cash receipts" title="Direct link to Post misc cash receipts">​</a></h3><p>Another common use case is the need to post transactions in Anthology Student that will not appear on an individual student&#x27;s ledger card. These transactions are labeled in Anthology Student as miscellaneous cash receipts.</p><p>The API to use for posting a miscellaneous cash receipt is POST api/student-accounting/misc-cash-receipts</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview11-d4f8d451b608df5153d3f9928d020094.png" width="1920" height="1030" class="img_ev3q"></p><p>One of the required properties for the request is to specify the transaction billing code that the misc cash receipt will be applied to. This controls how the transaction will ultimately be posted to the general ledger. Not all transaction billing codes are eligible to be used when posting miscellaneous cash receipts. Validation logic in this API requires that the transaction billing code specified in the request has been configured in Student to be able to be used for miscellaneous cash receipt posting. An OData query can be used to retrieve the transaction billing codes that are able to be used for miscellaneous cash receipt posting. The entity to query is BillingTransactionCodes. All rows from this entity where Usage is equal to M or A can be used.</p><p>There is also a PATCH endpoint that allows for updating a previously posted miscellaneous cash receipt transaction. Validation is in place that will not allow any updates to a miscellaneous cash receipt transaction that has already been release to the general ledger.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="authorization">Authorization<a href="#authorization" class="hash-link" aria-label="Direct link to Authorization" title="Direct link to Authorization">​</a></h2><p>In order to execute the APIs that have been discussed above, proper authorization needs to be configured. Whether using Basic Auth or OAuth with application key to authenticate, the user context the APIs are executing under will be a user record from the Staff entity. This is the user that authorization needs to be configured for. Access to the security console application is needed in order to set the needed permissions. Unlike the Anthology Student command APIs, the API endpoints discussed above have separate explicit tasks that need to be authorized. The Anthology Student command APIs are coupled with UI tasks. In order to properly authorize an API user to execute a command API, the applicable UI task needs to be identified and added for that user. For the APIs discussed in this document that exercise is not needed. Details are outlined below.</p><p>Within the Security console, the API - Student Accounting and API - Student Payment Plan tasks should be added for the user. These 2 tasks will authorize the user to execute every operation contained within the Student Accounting and Student Payment Plan sections within the swagger document. If more refined permissions are needed and you want to authorize the execution of specific operations with Student Accounting or Student Payment Plan, then the applicable individual operations will need to be authorized. Typically, this level of granularity is not needed and authorizing the two tasks mentioned above is all that is needed.</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview12-b8d983d2a6b6a97cc40b764fbed91e1b.png" width="1482" height="906" class="img_ev3q"></p><p>For any OData queries that will be executed, additional authorization is needed. The authorization model for the odata endpoint is to either grant permission to query all entities contained within the data model or to authorize each individual entity that data will be extracted from. Currently there are no tasks available for authorizing by business area of domain. Best practice is to NOT authorize access to the entire query data model so it will be necessary to create an inventoried list of each entity that data will be retrieved from and add the applicable operation for the user. In order to authorize at the operation level, select the role that the user is a member of. Then select Add Permissions. On the resulting page that is displayed, check the Show Operations checkbox. To make the resulting list easier to navigate, you may want to uncheck the Show Tasks, Show Built In Tasks and Show Roles check boxes. Click Apply.</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview13-d2cab6308a4ab34f9fedb586933f6984.png" width="1350" height="629" class="img_ev3q"></p><p>All of the odata query model operations are named as follows: domain + entity name (singluar) + query. So to authorize the permission to retrieve data from the BillingCodeTransaction entity, the StudentAccounts.BillingTransactionCode.Query operation would need to be added for the user.</p><p><img loading="lazy" alt="PaymentVendorPartnerOverview" src="/assets/images/PaymentVendorPartnerOverview14-6f03b48f35be88d717357abeb0a1f09e.png" width="1350" height="629" class="img_ev3q"></p><p>Once all query model operations for the list of entities are added for the user, then the authorization permissions should be complete for the user being authenticated when executing the APIs/OData queries.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2><p>The purpose of this document is to provide enough information to provide a Payment provider new to Anthology Student a jump start on building an integration that satisfy common integration requirements. This document is not intended to include all of the finer points and nuances for utilizing the APIs that have been covered. If there are questions after reviewing this document and the corresponding swagger documentation, you can submit any questions by sending an email to <a href="mailto:developers@anthology.com" target="_blank" rel="noopener noreferrer">developers@anthology.com</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/OneComputerGuy/anthologydevdocs/tree/main/docs/student/best-practices/PaymentVendorPartnerOverview.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/student/getting-started/first-steps"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Student REST API: First Steps</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/student/best-practices/studentapi-postunscheduledpayment-details"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Post Unscheduled Payments</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#common-payment-vendor-use-cases" class="table-of-contents__link toc-highlight">Common Payment vendor use cases</a><ul><li><a href="#post-payment" class="table-of-contents__link toc-highlight">Post Payment</a></li><li><a href="#post-charges-or-adjustments" class="table-of-contents__link toc-highlight">Post Charges or Adjustments</a></li><li><a href="#apply-posted-payments" class="table-of-contents__link toc-highlight">Apply Posted Payments</a></li><li><a href="#process-and-post-scheduled-refunds" class="table-of-contents__link toc-highlight">Process and Post Scheduled Refunds</a></li><li><a href="#create-a-payment-plan" class="table-of-contents__link toc-highlight">Create a payment plan</a></li><li><a href="#update-an-existing-payment-plan" class="table-of-contents__link toc-highlight">Update an existing payment plan</a></li><li><a href="#post-misc-cash-receipts" class="table-of-contents__link toc-highlight">Post misc cash receipts</a></li></ul></li><li><a href="#authorization" class="table-of-contents__link toc-highlight">Authorization</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="custom-footer-bg_N5WF"><div><div class="custom-footer_YMqP"><img src="/img/anthology-logo-dark.svg" alt="Anthologt Inc logo"><div class="footer-section_tLKY"><div><p><strong>Contact Us</strong></p><ul><li><a href="mailto:developers@anthology.com">developers@anthology.com</a></li><li><a href="https://support.anthology.com" target="_blank">Global Support Portal</a></li></ul></div><div><p><strong>Stay connected</strong></p><ul><li><a href="/docs/community/community-intro">Anthology Community</a></li><li><a href="https://join.slack.com/t/blackboardtechies/shared_invite/zt-nheykjth-wLgONrE58MS53H~oySYk1g" target="_blank">Blackboard Techies on Slack</a></li></ul></div></div></div><p class="footer-copyright_oW5Z">©<!-- -->2024<!-- --> Anthology Inc. and its affiliates. All rights reserved. <a href="https://www.anthology.com/trademarks-and-patents" target="_blank">Trademarks and Patents</a></p></div></footer></div>
<script src="/assets/js/runtime~main.14fca754.js"></script>
<script src="/assets/js/main.f05dfd13.js"></script>
</body>
</html>