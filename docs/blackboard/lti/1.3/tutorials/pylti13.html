<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-blackboard/lti/1.3/tutorials/pylti13" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Using the pyLTI1p3 Library with Learn | Anthology Developer Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.anthology.com/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://docs.anthology.com/img/social-card.png"><meta data-rh="true" property="og:url" content="https://docs.anthology.com/docs/blackboard/lti/1.3/tutorials/pylti13"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Using the pyLTI1p3 Library with Learn | Anthology Developer Docs"><meta data-rh="true" name="description" content="LTI 1.3 is a much better, much more secure option for integrating one application with another in a standard way. Python is an industry-standard language and is in use by many Blackboard institutions for building integrations."><meta data-rh="true" property="og:description" content="LTI 1.3 is a much better, much more secure option for integrating one application with another in a standard way. Python is an industry-standard language and is in use by many Blackboard institutions for building integrations."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.anthology.com/docs/blackboard/lti/1.3/tutorials/pylti13"><link data-rh="true" rel="alternate" href="https://docs.anthology.com/docs/blackboard/lti/1.3/tutorials/pylti13" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.anthology.com/docs/blackboard/lti/1.3/tutorials/pylti13" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Anthology Developer Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Anthology Developer Docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ccf81daf.css">
<script src="/assets/js/runtime~main.17fc8cef.js" defer="defer"></script>
<script src="/assets/js/main.a1fd9314.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/anthology-logo-light.svg" alt="Anthology Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/anthology-logo-dark.svg" alt="Anthology Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/contributions">Contributions</a><div class="navbar__item"><a class="navbar-gh-link" href="https://github.com/blackboard/anthologydevdocs" target="_blank"><img class="navbar-gh-img-link" src="/img/github-logo.png"></a></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Using the pyLTI1p3 Library with Learn</h1><div class="tracker_container_Gxex"><p class="date_Xr9N">Published: <!-- -->Not Available</p><p class="date_Xr9N">Last Update:<!-- --> <!-- -->Not Available</p><p> </p></div></header><p>LTI 1.3 is a much better, much more secure option for integrating one application with another in a standard way. Python is an industry-standard language and is in use by many Blackboard institutions for building integrations.
The purpose of this document is to demonstrate how to use the <a href="https://pypi.org/project/PyLTI1p3" target="_blank" rel="noopener noreferrer" class="">pyLTI1p3</a> library, built by <a href="https://github.com/dmitry-viskov" target="_blank" rel="noopener noreferrer" class="">Dmitry Viskov</a> to easily integrate a Python
application with Learn&#x27;s Ultra Experience. For the purposes of this demonstration, we will use Dmitry&#x27;s <a href="https://github.com/dmitry-viskov/pylti1.3-flask-example" target="_blank" rel="noopener noreferrer" class="">pylti1.3 flask example</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="about-the-project">About The Project<a href="#about-the-project" class="hash-link" aria-label="Direct link to About The Project" title="Direct link to About The Project" translate="no">​</a></h3>
<p>The Flask sample is a simple way to test all the LTI Advantage capabilities of any platform that supports it. Essentially, the application is a brick breaker type game. It uses a basic launch to load the game.
It uses the Names and Roles Provisioning Service to load a leaderboard, it uses the Assignments and Grades Service to save your score, and you can use Deep Linking to create links to the game with varying degrees of difficulty.
Best of all, with a few minor configuration changes, this project works with Learn out of the box!</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="getting-started">Getting Started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started" translate="no">​</a></h2>
<p>As with any project, the first step is to clone the project to your local desktop. To do this, simply open a terminal, navigate to the directory you wish to clone the application to,
and type <code>git clone https://github.com/dmitry-viskov/pylti1.3-flask-example.git</code>. If you are interested in making changes, you should fork the repo to your own account, and clone from there.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="setting-up-learn">Setting Up Learn<a href="#setting-up-learn" class="hash-link" aria-label="Direct link to Setting Up Learn" title="Direct link to Setting Up Learn" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="developer-portal">Developer Portal<a href="#developer-portal" class="hash-link" aria-label="Direct link to Developer Portal" title="Direct link to Developer Portal" translate="no">​</a></h4>
<p>Now that we have the project cloned locally, we need to register the application for use with Learn. We do this via the <a href="https://developer.anthology.com" target="_blank" rel="noopener noreferrer" class="">developer portal</a>.
For more information on this process, check out this <a class="" href="/docs/developer-portal/start-here">document</a>. Once you have an account set up, you can simply register a new application.
You will be prompted to enter several pieces of information. For this project, here is what we need to enter:</p>
<table><thead><tr><th>Field</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>Application Name</td><td>You can enter anything you like, but this name will display in Learn</td><td><code>Py LTI 1.3 Game</code></td></tr><tr><td>Description</td><td>This is a free-form field. You can enter anything you like.</td><td><code>A brick-breaker-style game written by Dmitry Viskov to demonstrate LTI Advantage in Python</code></td></tr><tr><td>Domain(s)</td><td>This should be the domain you plan to host the tool from. We use <a href="https://www.heroku.com" target="_blank" rel="noopener noreferrer" class="">Heroku</a>, in our example. This requires some additional code changes, documented <a href="#using-heroku" class="">here</a></td><td><code>pylti1p3-game.herokuapp.com</code></td></tr><tr><td>Login Initiation URL</td><td>This is the URL that Learn will use to launch into your application to begin the OIDCLogin process</td><td><code>https:pylti1p3-game.herokuapp.com/login/</code></td></tr><tr><td>Tool Redirect URL(s)</td><td>The URL to redirect to upon successful completion of the OIDC Login</td><td><code>https:pylti1p3-game.herokuapp.com/launch/</code></td></tr><tr><td>Tool JWKS URL</td><td>The publicly accessible URL to the tool&#x27;s public key. We do not use this in this project, so we will leave it blank and let the portal generate our private key</td><td></td></tr><tr><td>Signing Algorithm</td><td>The cryptographic algorithm used to sign the JWT. Leave this as RS256</td><td></td></tr><tr><td>Group</td><td>The developer group to associate with the integration. Here is more information on <a class="" href="/docs/developer-portal/production-groups-rest-api-and-site-registration-limits">groups</a></td><td></td></tr></tbody></table>
<p>Once you fill out this form, click the <code>Register application and generate API key</code> button, and you will be prompted with several pieces of information. You will only see this once, so make sure you save the data somewhere.
Click <code>Done</code> to take you back to the applications page.</p>
<p>We have one more step to go. Next to the name of your game, click the ellipsis <code>...</code> icon to launch the context menu and select <code>Manage Placements</code>. Click the <code>Register</code> button.
In the <code>Name</code> field, give the placement a name that you want to display to the instructor.
In the <code>Desciption</code> field, type anything you like. Under <code>Type</code>, select <code>Deep Linking content tool</code>.
Under <code>Target link URI</code>, enter the launch URL to your tool. In our case it is <code>https://pylti1p3-game.herokuapp.com/launch/</code>.
Now click <code>Register placement</code>, and we are ready to deploy the tool in Learn.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="learn-system-admin">Learn System Admin<a href="#learn-system-admin" class="hash-link" aria-label="Direct link to Learn System Admin" title="Direct link to Learn System Admin" translate="no">​</a></h4>
<p>Now that we have our application registered, we have to tell our Learn instance that we have an application we want to integrate. To do this, you will need administrator privileges.
Navigate to your Learn server in your browser and login as an appropriate user. Click the <code>Admin</code> link in the Ultra Base Navigation to access the System Administrator panel.
In the <code>Integrations</code> module, click the link for <code>LTI Tool Providers</code>. Then in the menu bar, click <code>Register LTI 1.3 Tool</code>. You are prompted for a Client ID.
In the data you received from the developer portal, there was an Application ID. In LTI, this is your Client ID, and we will need it here. Paste in your Client ID and click submit.
Learn will reach out to the Developer Portal, verify your Client ID and then display a form with all the settings available. Many of these settings are read-only.
We need to save the <code>Deployment ID</code>, make sure the tool is marked as &#x27;Approved&#x27;, and be sure to enable memberships and posting of grades. Then click submit.</p>
<p>Our game is now installed in Learn!</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="setting-up-the-tool">Setting Up The Tool<a href="#setting-up-the-tool" class="hash-link" aria-label="Direct link to Setting Up The Tool" title="Direct link to Setting Up The Tool" translate="no">​</a></h3>
<p>There are four files we need to modify in our tool in order to run it. In the repository you cloned to your desktop, you will see a configs directory.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="gamejson">game.json<a href="#gamejson" class="hash-link" aria-label="Direct link to game.json" title="Direct link to game.json" translate="no">​</a></h4>
<p>In <code>game.json</code>, you will already see a section for Blackboard. It will look like this:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">&quot;https://blackboard.com&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;client_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your client id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;auth_login_url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://developer.anthology.com/api/v1/gateway/oidcauth&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;auth_token_url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://developer.anthology.com/api/v1/gateway/oauth2/jwttoken&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;key_set_url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://developer.anthology.com/api/v1/management/applications/&lt;your client id&gt;/jwks.json&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;key_set&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;private_key_file&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;private.key&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;deployment_ids&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;your deployment id&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>The Blackboard URL is the <em>Issuer</em> sent in the LTI launch JWT. This is always the value in Learn. The value for <code>client_id</code> should be set to your client ID (application ID from the Developer Portal).
The <code>auth_login_url</code> and <code>auth_token_url</code> settings are always the same, and do not need to be changed. The <code>key_set_url</code> is always the same, as well,
though it contains your client ID, so you will need to replace <code>&lt;your client id&gt;</code> with, you guessed it, your client ID. The <em>deployment ID</em> that you received when you registered your tool in learn
goes in the <code>deployment_ids</code> setting. Save this file.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="privatepublic-key-pair">Private/public key pair<a href="#privatepublic-key-pair" class="hash-link" aria-label="Direct link to Private/public key pair" title="Direct link to Private/public key pair" translate="no">​</a></h4>
<p>You need to generate your own private/public key pair in RSA format. There are many online tools or command-line tools to do this.
The next file we need to modify is the <code>private.key</code> file, also in the configs directory. Delete the current contents, and paste the private key you generated.
You should put your public keyi in the <code>public.key</code> file.
Last, you&#x27;ll need to convert your public key to the JWK format and put that in the public.jwk.json file.</p>
<p>We are now ready to run our code! The final step is to deploy the Game application to the server it will run on and run <code>python game/app.py</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-heroku">Using Heroku<a href="#using-heroku" class="hash-link" aria-label="Direct link to Using Heroku" title="Direct link to Using Heroku" translate="no">​</a></h3>
<p>If you are planning to run this on Heroku, there are a few additional changes that need to be made before you deploy your code. First, Heroku needs to know what to do when your code is committed. Enter <code>Procfile</code>.
Simply create a file named <code>Procfile</code> at the root level of the game, and in it place:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> python game</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">py</span><br></span></code></pre></div></div>
<p>Now save this file.</p>
<p>Next, open up game/app.py. At the very bottom of the page, you will see an entry that looks like this:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">host</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;0.0.0.0&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">9017</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Heroku controls the ports that your application runs on, and setting it incorrectly renders your application useless. Furthermore, it can change from deploy-to-deploy.
As such, we need to pull the port number from environment variables. To do so, replace the code above with the code below:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;PORT&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">33507</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">host</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;0.0.0.0&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> port</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Lastly, app.py is in the game directory rather than the root directory, so we need to make a few small adjustments. Towards the top (around line 27), you will see the Flask app being initialized:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Flask</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;pylti1p3-game-example&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> template_folder</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;templates&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> static_folder</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;static&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>We need to account for the directory we are running in, and add the path to this declaration:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Flask</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;pylti1p3-game-example&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> template_folder</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;game/templates&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> static_folder</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;game/static&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>And finally, we need to make sure our application can find the LTI configuration file. Around line 65, you will see a method called <code>get_lti_config_path</code> and it will look like this:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_lti_config_path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">root_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;..&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;configs&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;game.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Make it look like this:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_lti_config_path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">root_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;configs&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;game.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>And that&#x27;s it. You can now check in your code to your Heroku dyno - <code>git push -u heroku master</code> - and Heroku will build and run your application. Once its complete, you can run <code>heroku logs --tail</code>
to see the communication between Learn and our game.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="running-the-game-from-learn">Running The Game From Learn<a href="#running-the-game-from-learn" class="hash-link" aria-label="Direct link to Running The Game From Learn" title="Direct link to Running The Game From Learn" translate="no">​</a></h2>
<p>Now that all the setup is done, we are ready to play our game. As a user in a course with Instructor privileges, login to Blackboard and navigate to your Ultra course.
In the left-hand navigation, you will see a link to <code>View course &amp; institution tools</code>. Click this link. In teh corresponding peek panel, click the link to <code>Browse all course tools</code>.
Under the <em>Institution Tools</em> header, you will find the placement we created. It will be listed under the <code>label</code> you defined when creating the placement.
Click this link, and you will be launched via LTI to a simple form that allows you to select the difficulty of the game you wish to play.
Click the button for your selected difficulty, and the tool will automatically create a link to the game with the selected difficulty in your course outline.</p>
<blockquote>
<p><strong>NOTE</strong>: If you selected &#x27;Launch in a new window&#x27; when you created the placement, you will have to refresh the course outline before you will see the content item.</p>
</blockquote>
<p>You should now have a content item called <code>Breakout &lt;your selected difficulty&gt; mode!</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="click-it-to-play">Click it to play!<a href="#click-it-to-play" class="hash-link" aria-label="Direct link to Click it to play!" title="Direct link to Click it to play!" translate="no">​</a></h4>
<p>In the background, the tool uses the Names and Roles Provisioning service to create a leaderboard with the course members.
Further, it uses the Assignments and Grades Service to store your latest score. Pretty fancy, right?</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/blackboard/anthologydevdocs/tree/main/docs/blackboard/lti/1.3/tutorials/py-lti-1p3.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#about-the-project" class="table-of-contents__link toc-highlight">About The Project</a></li><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting Started</a><ul><li><a href="#setting-up-learn" class="table-of-contents__link toc-highlight">Setting Up Learn</a></li><li><a href="#setting-up-the-tool" class="table-of-contents__link toc-highlight">Setting Up The Tool</a></li><li><a href="#using-heroku" class="table-of-contents__link toc-highlight">Using Heroku</a></li></ul></li><li><a href="#running-the-game-from-learn" class="table-of-contents__link toc-highlight">Running The Game From Learn</a></li></ul></div></div></div></div></main></div></div></div><footer class="custom-footer-bg_N5WF"><div><div class="custom-footer_YMqP"><img src="/img/anthology-logo-dark.svg" alt="Anthologt Inc logo"><div class="footer-section_tLKY"><div><p><strong>Contact Us</strong></p><ul><li><a href="mailto:developers@anthology.com">developers@anthology.com</a></li><li><a href="https://support.anthology.com" target="_blank">Global Support Portal</a></li></ul></div><div><p><strong>Stay connected</strong></p><ul><li><a href="/docs/community/community-intro">Anthology Community</a></li><li><a href="https://join.slack.com/t/blackboardtechies/shared_invite/zt-nheykjth-wLgONrE58MS53H~oySYk1g" target="_blank">Blackboard Techies on Slack</a></li></ul></div></div></div><p class="footer-copyright_oW5Z">©<!-- -->2025<!-- --> Anthology Inc. and its affiliates. All rights reserved. <a href="https://www.anthology.com/trademarks-and-patents" target="_blank">Trademarks and Patents</a></p></div></footer></div>
</body>
</html>